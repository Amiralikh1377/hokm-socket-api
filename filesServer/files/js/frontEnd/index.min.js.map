{"version":3,"names":[],"mappings":"","sources":["frontEnd/index.min.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Player = require(\"./Player\");\n\nvar _Player2 = _interopRequireDefault(_Player);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import $ from './jquery-2.0.3.min'\n\nvar Ai = function Ai(id, name) {\n    _Player2.default.call(this, id, name);\n};\n\nAi.prototype = Object.create(_Player2.default.prototype);\n\nAi.prototype.prepareTransfer = function () {\n    var selected = [],\n        cards = [];\n    while (selected.length < 3) {\n        var s = Math.floor(Math.random() * this.row.cards.length);\n        if (selected.indexOf(s) === -1) {\n            selected.push(s);\n        }\n    }\n    for (var i = 0; i < 3; i++) {\n        cards.push(this.row.cards[selected[i]]);\n    }\n    this.selected = cards;\n    return $.Deferred().resolve();\n};\n\nAi.prototype.confirmTransfer = function () {\n    return this.brain.confirmCards();\n};\n\nAi.prototype.transferTo = function (other) {\n    var selected = this.selected;\n    _Player2.default.prototype.transferTo.call(this, other);\n    this.brain.watch({\n        type: \"in\",\n        player: other,\n        cards: selected\n    });\n};\n\nAi.prototype.watch = function (info) {\n    this.brain.watch(info);\n};\n\nAi.prototype.decide = function (validCards, boardCards, boardPlayers, scores) {\n    return this.brain.decide(validCards, boardCards, boardPlayers, scores).then(function (c) {\n        return this.row.cards[c];\n    }.bind(this));\n};\nAi.prototype.inSethakem = function (val) {\n    this.row.flipped = !val;\n    if (!val) this.row.display = null;\n};\n\nexports.default = Ai;\n\n},{\"./Player\":8}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Brain = require(\"./Brain\");\n\nvar _Brain2 = _interopRequireDefault(_Brain);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AsyncBrain = function AsyncBrain(user, brainName, options) {\n    _Brain2.default.call(this, user);\n    var worker = this.worker = new Worker(\"../files/js/BrainWorker.js\");\n    this.initDefer = $.Deferred();\n    var self = this;\n    this.worker.onmessage = function (e) {\n        if (e.data.type === \"decision\") {\n            self.curDefer.resolve(e.data.result);\n            self.curDefer = null;\n        } else if (e.data.type === \"loaded\") {\n            worker.postMessage({\n                type: \"ini\",\n                userId: user.id,\n                brain: brainName,\n                options: options\n            });\n        } else if (e.data.type === \"ini-ed\") {\n            self.initDefer.resolve();\n        } else if (e.data.type === \"confirmed\") {\n            self.confirmDefer.resolve();\n        }\n    };\n};\n\nAsyncBrain.prototype = Object.create(_Brain2.default.prototype);\n\nAsyncBrain.prototype.terminate = function () {\n    this.initDefer && this.initDefer.reject();\n    this.curDefer && this.curDefer.reject();\n    this.confirmDefer && this.confirmDefer.reject();\n};\n\nAsyncBrain.prototype.init = function () {\n    return this.initDefer;\n};\n\nAsyncBrain.prototype.watch = function (info) {\n    var tinfo = {\n        type: info.type,\n        player: info.player.id\n    };\n    if (info.cards) {\n        tinfo.cards = info.cards.map(function (c) {\n            return c.id;\n        });\n    }\n    if (info.card) {\n        tinfo.card = info.card.id;\n    }\n    if (info.curSuit) {\n        tinfo.curSuit = info.curSuit;\n    }\n    this.worker.postMessage({\n        type: \"watch\",\n        params: tinfo\n    });\n};\n\nAsyncBrain.prototype.confirmCards = function () {\n    this.worker.postMessage({\n        type: \"confirm\",\n        cards: this.user.row.cards.map(function (c) {\n            return c.id;\n        })\n    });\n    this.confirmDefer = $.Deferred();\n    return this.confirmDefer;\n};\n\nAsyncBrain.prototype.decide = function (validCards, boardCards, boardPlayers, scores) {\n    this.worker.postMessage({\n        type: \"decide\",\n        params: {\n            validCards: validCards.map(function (c) {\n                return { id: c.id, ind: c.ind };\n            }),\n            boardCards: boardCards.map(function (c) {\n                return c.id;\n            }),\n            boardPlayers: boardPlayers.map(function (c) {\n                return c.id;\n            }),\n            scores: scores\n        }\n    });\n    this.curDefer = $.Deferred();\n    return this.curDefer;\n};\n\nexports.default = AsyncBrain;\n\n},{\"./Brain\":3}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar Brain = function Brain(user) {\n    this.user = user;\n    this.playerInfo = [[], [], [], []];\n};\n\nBrain.prototype.watch = function (info) {};\n\nBrain.prototype.confirmCards = function () {\n    return {\n        done: function done(cb) {\n            cb();\n        }\n    };\n};\n\nBrain.prototype.init = function () {\n    return $.Deferred().resolve();\n};\n\nBrain.prototype.terminate = function () {};\n\nexports.default = Brain;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _domBinding = require('./domBinding');\n\nvar _domBinding2 = _interopRequireDefault(_domBinding);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar suits = ['spade', 'heart', 'club', 'diamond'];\nvar Card = function Card(id) {\n    this.id = id;\n    this.num = id % 13 + 1;\n    this.suit = id % 4;\n    this.flipped = true;\n\n    var acutualNum = this.num + 1;\n    var numtext = acutualNum + '';\n    if (acutualNum > 10) {\n        numtext = {\n            11: 'J',\n            12: 'Q',\n            13: 'K',\n            14: 'A'\n        }[acutualNum];\n    }\n    this.display = _domBinding2.default.createCardDisplay(numtext, this.suit);\n    this.display.onClick = this.shift.bind(this);\n};\n\nCard.suits = suits;\n\nCard.prototype.adjustPos = function (noUpdate) {\n    if (!noUpdate) this.pos = this.parent.getPosFor(this.ind, this);\n    this.display.adjustPos(this.pos);\n};\n\nCard.prototype.shift = function () {\n\n    if (!this.display.isSelectable()) return;\n    if (!this.parent.curShifted) return;\n    if (this.parent.curShifted.indexOf(this) !== -1) {\n        this.parent.removeShift(this);\n    } else {\n        //delete this\n        this.parent.addShift(this);\n    }\n};\n\nCard.prototype.out = function () {\n    this.display.out();\n};\n\nexports.default = Card;\n\n},{\"./domBinding\":18}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar logs = [];\nvar Debug = {};\nDebug.log = function (title, mess) {\n    if ((typeof mess === \"undefined\" ? \"undefined\" : _typeof(mess)) === 'object') mess = JSON.stringify(mess);\n    logs.push({ title: title, mess: mess });\n};\nDebug.show = function () {\n    var wnd = window.open(\"about:blank\", \"\", \"_blank\");\n    logs.forEach(function (l) {\n        var s = window.document.createElement(\"div\");\n        s.innerHTML = l.title + \"----|----\" + l.mess;\n        wnd.document.body.appendChild(s);\n    });\n};\nexports.default = Debug;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Player = require('./Player');\n\nvar _Player2 = _interopRequireDefault(_Player);\n\nvar _ui = require('./ui');\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Human = function Human(id, name) {\n\n    _Player2.default.call(this, id, name);\n    this.row.flipped = false;\n    this.display.setHuman(true);\n};\n//import $ from 'jquery-2.0.3.min'\n\n\nHuman.prototype = Object.create(_Player2.default.prototype);\n\nHuman.prototype.takeIn = function (cards) {\n    _Player2.default.prototype.takeIn.call(this, cards);\n    this.row.setSelected(cards);\n};\n\nHuman.prototype.decide = function (validCards) {\n    validCards.forEach(function (c) {\n        c.display.setSelectable(true);\n    });\n    if (validCards.length === 1 && validCards[0].id === 26) {\n        _ui2.default.showMessage('Please start with 2 of Clubs.');\n    }\n    var d = $.Deferred();\n    var row = this.row;\n    _ui2.default.buttonClickOnce(function () {\n        _ui2.default.hideMessage();\n        _ui2.default.hideButton();\n        validCards.forEach(function (c) {\n            c.display.setSelectable(false);\n        });\n        d.resolve(row.getSelected()[0]);\n    });\n    return d;\n};\n\nHuman.prototype.confirmTransfer = function () {\n    _ui2.default.showButton(\"Confirm\");\n    _ui2.default.hideArrow();\n    _ui2.default.hideMessage();\n    var d = $.Deferred();\n    _ui2.default.buttonClickOnce(function () {\n        this.doneTransfer();\n        d.resolve();\n    }.bind(this));\n    return d;\n};\n\nHuman.prototype.doneTransfer = function () {\n    this.row.curShifted = [];\n    this.row.adjustPos();\n    _ui2.default.hideButton();\n};\n\nHuman.prototype.initForNewRound = function () {\n    _Player2.default.prototype.initForNewRound.call(this);\n    this.row.curShifted = [];\n};\n\nHuman.prototype.prepareTransfer = function (dir) {\n    _ui2.default.showPassingScreen(dir);\n    this.row.cards.forEach(function (c) {\n        c.display.setSelectable(true);\n    });\n    this.row.maxShift = 3;\n    var d = $.Deferred();\n    var row = this.row;\n    _ui2.default.arrowClickOnce(function () {\n        this.selected = row.getSelected();\n        this.row.maxShift = 1;\n        this.row.cards.forEach(function (c) {\n            c.display.setSelectable(false);\n        });\n        d.resolve();\n    }.bind(this));\n\n    return d;\n};\n\nHuman.prototype.rowSelected = function () {\n    if (this.row.maxShift === 3) {\n        _ui2.default.showArrow();\n    } else {\n        _ui2.default.showButton(\"Go!\");\n    }\n};\n\nHuman.prototype.rowDeselected = function () {\n    if (this.row.maxShift === 3) {\n        _ui2.default.hideArrow();\n    } else {\n        _ui2.default.hideButton();\n    }\n};\nHuman.prototype.inSethakem = function (val) {\n    this.row.flipped = !val;\n};\n\nexports.default = Human;\n\n},{\"./Player\":8,\"./ui\":31}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n    $('#login_page').removeClass(\"hide\").addClass(\"show\");\n    $('#loginButton').click(function () {\n        (0, _connectToServer.setName)($('#userName').val());\n    });\n};\n\nvar _connectToServer = require(\"./connectToServer\");\n\nvar userName = void 0; ////import $ from './jquery-2.0.3.min'\n\nvar location = void 0;\nvar forceStopDom = $(\"#forceStop\");\n\nfunction gameForceStop() {\n    forceStopDom.click(forceStop);\n    $(\".forceStopIcon\").removeClass('hide').addClass('show').click(function () {\n        $(\".stopFrame\").removeClass('hide').addClass('show');\n        $(\"#game-region\").addClass('blur');\n    });\n\n    $(\"#forceStopCancel\").click(function () {\n        $(\".stopFrame\").removeClass('show').addClass('hide');\n        $(\"#game-region\").removeClass('blur');\n    });\n}\n\nfunction forceStop() {\n    var room_id = config.getRoom_id();\n    window.socket.emit('GAME', {\n        room_id: room_id,\n        COM: \"forceStop\",\n        res: {\n            name: userName,\n            location: location\n        }\n    });\n    $(\".stopFrame\").removeClass('show').addClass('hide');\n}\n\n;\n\n},{\"./connectToServer\":17}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Waste = require('./Waste');\n\nvar _Waste2 = _interopRequireDefault(_Waste);\n\nvar _domBinding = require('./domBinding');\n\nvar _domBinding2 = _interopRequireDefault(_domBinding);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Player = function Player(id, name) {\n    this.row = new _Row2.default(id, this);\n    this.waste = new _Waste2.default(id, this);\n    this.id = id;\n    this._score = 0;\n    this._oldScore = 0;\n    this.display = _domBinding2.default.createPlayerDisplay(id, name);\n    this.brain = null;\n    this.selected = null;\n\n    Object.seal(this);\n};\n\nPlayer.prototype.setName = function (name) {\n    this.display.setName(name);\n};\n\nPlayer.prototype.adjustPos = function () {\n    this.row.adjustPos();\n    this.waste.adjustPos();\n    this.display.adjustPos();\n};\n\nPlayer.prototype.initForNewRound = function () {\n    this._score = 0;\n    this.row.cards = [];\n    this.waste.cards = [];\n    this.display.rank = null;\n    this.display.moveUp = false;\n    this.display.adjustPos();\n    this.display.setScoreText(this._oldScore);\n\n    // if(this.id % 2 === 1) this.brain = new McBrain(this);\n    // if(this.id === 2) this.brain = new McBrain(this);\n    // else if(this.id === 1) this.brain = new PomDPBrain(this);\n    // else if(this.id === 2) this.brain = new randomBrain(this);\n    // else this.brain = new SimpleBrain(this);\n    // this.brain = new RandomBrain();\n};\n\nPlayer.prototype.out = function (outCards) {\n    var self = this;\n    outCards.forEach(function (c) {\n        self.row.out(c);\n    });\n};\n\nPlayer.prototype.takeIn = function (inCards) {\n    var self = this;\n    inCards.forEach(function (c) {\n        self.row.addCard(c);\n    });\n};\n\nPlayer.prototype.clearScore = function () {\n    this._score = this._oldScore = 0;\n};\n\nPlayer.prototype.setScore = function (val) {\n    this._score = val;\n    this.display.setScoreText(this._oldScore + \" + \" + this._score);\n};\nPlayer.prototype.setHakem = function (val) {\n    this.display.setHakem(val);\n};\n\nPlayer.prototype.finalizeScore = function () {\n    this._oldScore += this._score;\n    this._score = 0;\n    this.display.setFinalText(this._oldScore);\n};\n\nPlayer.prototype.incrementScore = function (val) {\n    this.setScore(this._score + val);\n    if (val > 0) this.display.highlight();\n};\n\nPlayer.prototype.getScore = function () {\n    return this._score;\n};\n\nPlayer.prototype.setActive = function (yes) {\n    this.display.setHighlight(yes);\n};\n\nPlayer.prototype.watch = function () {};\n\nPlayer.prototype.transferTo = function (other) {\n    var cards = this.selected;\n    this.selected = null;\n    this.out(cards);\n    other.takeIn(cards);\n};\n\nexports.default = Player;\n\n},{\"./Row\":12,\"./Waste\":14,\"./domBinding\":18}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Brain = require('./Brain');\n\nvar _Brain2 = _interopRequireDefault(_Brain);\n\nvar _prematureOptimization = require('./prematureOptimization');\n\nvar _prematureOptimization2 = _interopRequireDefault(_prematureOptimization);\n\nvar _PomDPSimulator = require('./PomDPSimulator');\n\nvar _PomDPSimulator2 = _interopRequireDefault(_PomDPSimulator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\"use strict\";\n\nvar removeFromUnorderedArray = _prematureOptimization2.default.removeFromUnorderedArray;\nvar cardsInfo = _prematureOptimization2.default.cardsInfo;\n\nvar defaultOptions = {\n    time: 1000,\n    c: 10\n};\n\nvar PomDPBrain = function PomDPBrain(user, options) {\n    if (!options) {\n        options = defaultOptions;\n    }\n\n    this.c = options.c || 10;\n    this.maxTime = options.time || 1000;\n\n    this.user = user;\n    this.ind = user;\n    this.simulator = new _PomDPSimulator2.default(user);\n    var remainingCards = [];\n    for (var i = 0; i < 52; i++) {\n        remainingCards.push(i);\n    }\n    this.root = {\n        count: 0,\n        value: 0,\n        observations: {},\n        info: {\n            playersInfo: [{\n                hasCards: [],\n                lackCard: {},\n                numCards: 13,\n                score: 0\n            }, {\n                hasCards: [],\n                lackCard: {},\n                numCards: 13,\n                score: 0\n            }, {\n                hasCards: [],\n                lackCard: {},\n                numCards: 13,\n                score: 0\n            }, {\n                hasCards: [],\n                lackCard: {},\n                numCards: 13,\n                score: 0\n            }],\n            remainingCards: remainingCards,\n            curBoard: [],\n            heartBroken: false,\n            cardLackCount: remainingCards.map(function () {\n                return 0;\n            })\n        }\n    };\n    this.observationBuffer = [];\n};\n\nPomDPBrain.prototype = Object.create(_Brain2.default.prototype);\n\nPomDPBrain.prototype.search = function (vc) {\n    var endTime = Date.now() + this.maxTime;\n    var times = 0;\n    while (Date.now() < endTime) {\n        var state = this.genSample(this.root);\n        this.simulate(state, this.root, 0);\n        times++;\n    }\n    var actions = Object.keys(this.root.actions).map(function (a) {\n        return parseInt(a, 10);\n    }),\n        gameactions = vc.map(function (v) {\n        return v.id;\n    });\n    actions.forEach(function (a) {\n        if (gameactions.indexOf(a) === -1) {\n            throw \"mismatch \" + a;\n        }\n        removeFromUnorderedArray(gameactions, a);\n    });\n    if (gameactions.length) throw \"mismatch \" + gameactions.join(\" \");\n\n    var best = -1 / 0,\n        bestAction = 0;\n    for (var a in this.root.actions) {\n        if (this.root.actions[a].value > best) {\n            best = this.root.actions[a].value;\n            bestAction = a;\n        }\n    }\n    this.root = this.root.actions[bestAction];\n    return bestAction;\n};\n\nPomDPBrain.prototype.rollout = function (s, h, depth) {\n    // h.count++;\n    var val = this.simulator.run(s);\n    // h.value = ((h.count - 1) * h.value + val) / h.count;\n    return val;\n};\n\nPomDPBrain.prototype.simulate = function (s, h, depth) {\n    if (h.terminate) return 0;\n    if (!h.actions) {\n        var as = h.actions = {};\n        this.getAllActions(h).forEach(function (a) {\n            if (a == \"undefined\" || !a && a !== 0) throw a;\n            as[a] = this.initAction(h, a);\n        }.bind(this));\n        return this.rollout(s, h, depth);\n    }\n    var best,\n        bestScore = -1 / 0;\n    for (var a in h.actions) {\n        var score = this.getScore(h.actions[a]);\n        if (score > bestScore) {\n            bestScore = score;\n            best = a;\n        }\n    }\n    if (!best) {\n        throw \"eh\";\n    }\n\n    var simulateResult = this.simulator.step(s, parseInt(best, 10));\n\n    var ha = h.actions[best],\n        ohash = simulateResult.observation.join(\"\");\n    if (!(ohash in ha.observations)) {\n        ha.observations[ohash] = this.initObservation(ha, simulateResult.observation);\n    }\n\n    var r = simulateResult.score + this.simulate(simulateResult.state, ha.observations[ohash], depth + 1);\n    h.count++;\n    ha.count++;\n    ha.value = (ha.value * (ha.count - 1) + r) / ha.count;\n    return r;\n};\n\nPomDPBrain.prototype.getScore = function (action) {\n    if (!action.count) return 1 / 0;\n    return action.value + this.c * Math.sqrt(Math.log(action.parent.count) / action.count);\n};\n\nPomDPBrain.prototype.getAllActions = function (history) {\n    var info = history.info;\n    if (info.curBoard.length) {\n        var suit = cardsInfo[info.curBoard[0] % 100].suit;\n        var r = info.playersInfo[this.ind].hasCards.filter(function (c) {\n            return cardsInfo[c].suit === suit;\n        });\n        if (!r.length) {\n            return [].concat(info.playersInfo[this.ind].hasCards);\n        } else {\n            return r;\n        }\n    } else if (info.playersInfo[this.ind].hasCards.length === 13) {\n        return [26];\n    } else if (info.heartBroken) {\n        return [].concat(info.playersInfo[this.ind].hasCards);\n    } else {\n        var possible = info.playersInfo[this.ind].hasCards.filter(function (c) {\n            return cardsInfo[c].suit !== 1;\n        });\n        if (possible.length) return possible;else return [].concat(info.playersInfo[this.ind].hasCards);\n    }\n};\n\nPomDPBrain.prototype.initObservation = function (history, observation) {\n    var pinfo = history.info;\n    var curBoard = [].concat(pinfo.curBoard),\n        heartBroken = pinfo.heartBroken,\n        playersInfo = pinfo.playersInfo.map(function (info) {\n        return {\n            hasCards: [].concat(info.hasCards),\n            lackCard: Object.create(info.lackCard),\n            numCards: info.numCards,\n            score: info.score\n        };\n    }),\n        remainingCards = [].concat(pinfo.remainingCards),\n        cardLackCount = [].concat(pinfo.cardLackCount);\n    var info = {\n        curBoard: curBoard,\n        heartBroken: heartBroken,\n        playersInfo: playersInfo,\n        hash: observation.join(\"\"),\n        cardLackCount: cardLackCount,\n        remainingCards: remainingCards\n    };\n    observation.forEach(function (ob) {\n        var pid = (ob / 100 | 0) - 1;\n        playersInfo[pid].numCards--;\n        this.removeRemainingCard(ob % 100, info);\n        heartBroken = heartBroken || cardsInfo[ob % 100].suit === 1;\n        var curSuit;\n        if (curBoard.length) {\n            curSuit = cardsInfo[curBoard[0] % 100].suit;\n            if (curSuit) {\n                if (curSuit !== cardsInfo[ob % 100].suit) {\n                    var lackCardPlayer = playersInfo[pid];\n                    remainingCards.forEach(function (c) {\n                        if (cardsInfo[c].suit === curSuit) {\n                            lackCardPlayer.lackCard[c] = true;\n                            cardLackCount[c]++;\n                        }\n                    });\n                }\n            }\n        }\n        curBoard.push(ob);\n        if (curBoard.length === 4) {\n            var maxNum = -1,\n                maxPlayer = 0,\n                boardScore = 0;\n            for (var i = 0; i < 4; i++) {\n                var bcard = cardsInfo[curBoard[i] % 100];\n                if (bcard.suit === curSuit && bcard.num > maxNum) {\n                    maxPlayer = (curBoard[i] / 100 | 0) - 1;\n                    maxNum = bcard.num;\n                }\n                if (bcard.suit === 1) boardScore++;else if (bcard.suit === 0 && bcard.num === 11) boardScore += 13;\n            }\n            playersInfo[maxPlayer].score += boardScore;\n            curBoard.length = 0;\n        }\n    }.bind(this));\n    info.heartBroken = heartBroken;\n    remainingCards.sort(function (a, b) {\n        return cardLackCount[b] - cardLackCount[a];\n    });\n\n    var terminate = !playersInfo.some(function (p) {\n        return p.numCards > 0;\n    });\n\n    return {\n        info: info,\n        count: 0,\n        value: 0,\n        terminate: terminate\n    };\n};\n\nPomDPBrain.prototype.initAction = function (history, action) {\n    var info = history.info;\n    var curBoard = [].concat(info.curBoard),\n        heartBroken = info.heartBroken,\n        playersInfo = info.playersInfo.map(function (info) {\n        return {\n            hasCards: [].concat(info.hasCards),\n            lackCard: Object.create(info.lackCard),\n            numCards: info.numCards,\n            score: info.score\n        };\n    }),\n        remainingCards = [].concat(info.remainingCards),\n        cardLackCount = [].concat(info.cardLackCount);\n    return {\n        value: 0,\n        count: 0,\n        parent: history,\n        action: action,\n        observations: {},\n        info: {\n            curBoard: curBoard,\n            heartBroken: heartBroken,\n            playersInfo: playersInfo,\n            cardLackCount: cardLackCount,\n            remainingCards: remainingCards\n        }\n    };\n};\n\nPomDPBrain.prototype.removeRemainingCard = function (id, info) {\n    removeFromUnorderedArray(info.remainingCards, id);\n    info.playersInfo.forEach(function (p, ind) {\n        removeFromUnorderedArray(p.hasCards, id);\n    });\n};\n\nPomDPBrain.prototype.watch = function (info) {\n    if (info.type === \"in\") {\n        info.cards.forEach(function (c) {\n            this.removeRemainingCard(c, this.root.info);\n        }.bind(this));\n        [].push.apply(this.root.info.playersInfo[info.player].hasCards, info.cards);\n    } else {\n        this.observationBuffer.push(info.card + (info.player + 1) * 100);\n    }\n};\n\nPomDPBrain.prototype.confirmCards = function (cards) {\n    cards.forEach(function (c) {\n        this.removeRemainingCard(c, this.root.info);\n        this.root.info.playersInfo[this.ind].hasCards.push(c);\n    }.bind(this));\n};\n\nPomDPBrain.prototype.decide = function (vc) {\n    if (this.observationBuffer.join(\"\") in this.root) {\n        this.root = this.root[this.observationBuffer.join(\"\")];\n    } else {\n        this.root = this.initObservation(this.root, this.observationBuffer);\n    }\n    this.observationBuffer = [];\n\n    var action = parseInt(this.search(vc, this.root), 10);\n\n    for (var i = 0; i < vc.length; i++) {\n        if (vc[i].id === action) {\n            return vc[i].ind;\n        }\n    }\n    throw \"failed to find card, something must be of wrongness\";\n};\n\nPomDPBrain.prototype.genSample = function (node) {\n    var id = this.ind,\n        sample = [[], [], [], []],\n        playersInfo = node.info.playersInfo,\n        remainingCards = node.info.remainingCards;\n\n    var tryT = 1000,\n        ind;\n    while (tryT--) {\n        sample.forEach(function (p, ind) {\n            p.length = 0;\n            p.id = ind;\n        });\n        playersInfo.forEach(function (p, ind) {\n            [].push.apply(sample[ind], p.hasCards);\n        });\n        var toAdd = sample.filter(function (s, ind) {\n            return s.length < playersInfo[ind].numCards;\n        });\n        ind = 0;\n        var sum = 0;\n        var summ = 0;\n        toAdd.forEach(function (to) {\n            sum += to.length;\n            summ += playersInfo[to.id].numCards;\n        });\n        while (ind < remainingCards.length) {\n            var c = remainingCards[ind];\n            var allPossible = toAdd.length;\n            var aid = 0;\n            while (aid < allPossible) {\n                if (playersInfo[toAdd[aid].id].lackCard[c]) {\n                    allPossible--;\n                    var tmp = toAdd[allPossible];\n                    toAdd[allPossible] = toAdd[aid];\n                    toAdd[aid] = tmp;\n                } else {\n                    aid++;\n                }\n            }\n            if (allPossible === 0) {\n                break;\n            }\n            var pToAdd = Math.floor(Math.random() * allPossible);\n            toAdd[pToAdd].push(c);\n            ind++;\n            if (toAdd[pToAdd].length === playersInfo[toAdd[pToAdd].id].numCards) {\n                removeFromUnorderedArray(toAdd, toAdd[pToAdd]);\n                if (toAdd.length === 0) {\n                    break;\n                }\n            }\n        }\n        if (ind === remainingCards.length) {\n            break;\n        }\n    }\n    if (tryT === -1) {\n        alert(\"fail to gen sample\");\n    }\n    if (sample.some(function (s, ind) {\n        return s.length !== playersInfo[ind].numCards;\n    })) {\n        throw \"eh\";\n    }\n    return {\n        players: sample,\n        scores: node.info.playersInfo.map(function (info) {\n            return info.score;\n        }),\n        board: node.info.curBoard.concat([]),\n        heartBroken: node.info.heartBroken\n    };\n};\n\nexports.default = PomDPBrain;\n\n},{\"./Brain\":3,\"./PomDPSimulator\":10,\"./prematureOptimization\":28}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _prematureOptimization = require('./prematureOptimization');\n\nvar _prematureOptimization2 = _interopRequireDefault(_prematureOptimization);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar removeFromUnorderedArray = _prematureOptimization2.default.removeFromUnorderedArray;\nvar cardsInfo = _prematureOptimization2.default.cardsInfo;\n\nvar PomDPSimulator = function PomDPSimulator(id) {\n    this.observationBuffer = [];\n    this.playerId = id;\n    this.tmpVc = [];\n};\n\nPomDPSimulator.prototype._playCard = function (card) {\n    var playerCard = (this.curPlayer + 1) * 100 + card;\n\n    var board = this.state.board;\n    this.state.board.push(playerCard);\n    this.observationBuffer.push(playerCard);\n\n    removeFromUnorderedArray(this.state.players[this.curPlayer], card);\n\n    var boardScore = 0,\n        curSuit,\n        maxPlayer,\n        maxNum = 0;\n\n    if (this.state.board.length === 4) {\n        curSuit = cardsInfo[board[0] % 100].suit;\n        for (var i = 0; i < 4; i++) {\n            var player = (board[i] / 100 | 0) - 1,\n                c = cardsInfo[board[i] % 100];\n            if (c.suit === 1) {\n                boardScore += 1;\n            } else if (c.num === 11 && c.suit === 0) {\n                boardScore += 13;\n            }\n            if (c.suit === curSuit && c.num > maxNum) {\n                maxNum = c.num;\n                maxPlayer = player;\n            }\n        }\n        this.state.scores[maxPlayer] += boardScore;\n        this.curPlayer = maxPlayer;\n        this.state.board.length = 0;\n    } else {\n        this.curPlayer = (this.curPlayer + 1) % 4;\n    }\n};\n\nPomDPSimulator.prototype._getValidCards = function (cards) {\n    var vc = this.tmpVc;\n    this.tmpVc.length = 0;\n    if (this.state.board.length === 0) {\n        if (cards.length === 13) {\n            this.tmpVc.push(26);\n        } else if (this.state.heartBroken) {\n            [].push.apply(this.tmpVc, cards);\n        } else {\n            cards.forEach(function (c) {\n                if (cardsInfo[c].suit !== 1) {\n                    vc.push(c);\n                }\n            });\n        }\n    } else {\n        var suit = cardsInfo[this.state.board[0] % 100].suit;\n        cards.forEach(function (c) {\n            if (cardsInfo[c].suit === suit) {\n                vc.push(c);\n            }\n        });\n    }\n    if (!vc.length) {\n        [].push.apply(vc, cards);\n    }\n\n    return this.tmpVc;\n};\n\nPomDPSimulator.prototype._decide = function (player) {\n    var cards = this.state.players[player];\n    if (!cards.length) return null;\n    var vc = this._getValidCards(cards),\n        len = vc.length,\n        suit = -1,\n        maxNum = -1,\n        board = this.state.board;\n\n    if (board.length) {\n        suit = cardsInfo[board[0] % 100].suit;\n        maxNum = board.reduce(function (prev, curc) {\n            var cur = cardsInfo[curc % 100];\n            if (cur.suit === suit && cur.num > prev) {\n                return cur.num;\n            } else {\n                return prev;\n            }\n        }, 0);\n        return vc.reduce(function (prevc, curc) {\n            var cur = cardsInfo[curc],\n                prev = cardsInfo[prevc];\n            if (prev.suit === cur.suit) {\n                if (cur.suit === suit) {\n                    if (cur.num < maxNum) {\n                        if (prev.num > maxNum || prev.num < cur.num) return curc;else return prevc;\n                    } else if (cur.num > maxNum && prev.num > maxNum && board.length === 3) {\n                        if (cur.num > prev.num) return curc;else return prevc;\n                    } else if (cur.num < prev.num) {\n                        return curc;\n                    } else {\n                        return prevc;\n                    }\n                } else {\n                    if (cur.num > prev.num) return curc;else return prevc;\n                }\n            } else {\n                if (cur.suit === 0 && cur.num === 11) return curc;\n                if (prev.suit === 0 && prev.num === 11) return prevc;\n                if (cur.suit === 1) return curc;\n                if (prev.suit === 1) return prevc;\n                if (cur.num > prev.num) return curc;\n                return prevc;\n            }\n        });\n    } else {\n        return vc.reduce(function (prev, cur) {\n            if (cardsInfo[prev].num > cardsInfo[cur].num) return cur;else return prev;\n        });\n    }\n};\n\nPomDPSimulator.prototype.step = function (s, a) {\n    var players = s.players,\n        heartBroken = s.heartBroken,\n        board = s.board,\n        scores = s.scores,\n        oriScore = s.scores[this.playerId];\n    this.state = s;\n    this.curPlayer = this.playerId;\n\n    this._playCard(a);\n\n    while (this.curPlayer !== this.playerId) {\n        var toPlay = this._decide(this.curPlayer);\n        if (toPlay === null) break;\n        this._playCard(toPlay);\n    }\n    var moonShooter = -1,\n        outputScore = oriScore - this.state.scores[this.playerId];\n    this.state.scores.forEach(function (s, ind) {\n        if (s === 26) {\n            moonShooter = ind;\n        }\n    });\n    if (moonShooter !== -1) {\n        if (moonShooter === this.playerId) {\n            outputScore = oriScore + 26;\n        } else {\n            outputScore = oriScore - 26;\n        }\n    }\n    var result = {\n        state: s,\n        observation: this.observationBuffer.concat([]),\n        score: outputScore\n    };\n\n    this.observationBuffer.length = 0;\n\n    return result;\n};\n\nPomDPSimulator.prototype.run = function (s) {\n    var players = s.players,\n        heartBroken = s.heartBroken,\n        board = s.board,\n        oriScore = s.scores[this.playerId];\n    this.state = s;\n    this.curPlayer = this.playerId;\n\n    while (1) {\n        var toPlay = this._decide(this.curPlayer);\n        if (toPlay === null) break;\n        this._playCard(toPlay);\n    }\n    var moonShooter = -1,\n        outputScore = oriScore - this.state.scores[this.playerId];\n    this.state.scores.forEach(function (s, ind) {\n        if (s === 26) moonShooter = ind;\n    });\n    if (moonShooter !== -1) {\n        if (moonShooter === this.playerId) {\n            outputScore = oriScore + 26;\n        } else {\n            outputScore = oriScore - 26;\n        }\n    }\n\n    this.observationBuffer.length = 0;\n\n    return outputScore;\n};\n\nexports.default = PomDPSimulator;\n\n},{\"./prematureOptimization\":28}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Brain = require('./Brain');\n\nvar _Brain2 = _interopRequireDefault(_Brain);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import $ from './jquery-2.0.3.min'\n\n\nvar RandomBrain = function RandomBrain(user) {\n    _Brain2.default.call(this, user);\n};\n\nRandomBrain.prototype = Object.create(_Brain2.default.prototype);\n\nRandomBrain.prototype.decide = function (validCards) {\n    return $.Deferred().resolve(validCards[Math.floor(Math.random() * validCards.length)].ind);\n};\n\nexports.default = RandomBrain;\n\n},{\"./Brain\":3}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _layout = require('./layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _game_sendCard = require('./game_sendCard');\n\nvar _game_sendCard2 = _interopRequireDefault(_game_sendCard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Row = function Row(id, player) {\n    this.id = id;\n    this.cards = [];\n    this.isVertical = id % 2;\n    this.rotation = 90 * ((id + 1) % 4) - 90;\n    this.curShifted = [];\n    this.flipped = true;\n    this.playedBy = player;\n};\n\nRow.prototype.addCard = function (card) {\n    card.parent = this;\n    card.ind = this.cards.length;\n    this.cards.push(card);\n};\n\nRow.prototype.getSelected = function () {\n    return [].concat(this.curShifted);\n};\n\nRow.prototype.setSelected = function (cards) {\n    this.curShifted = [].concat(cards);\n};\n\nRow.prototype.adjustPos = function () {\n    if (this.isVertical) {\n        this.distance = _layout2.default.width / 2 - _layout2.default.rowMargin - _layout2.default.cardHeight / 2;\n    } else {\n        this.distance = _layout2.default.height / 2 - _layout2.default.rowMargin - _layout2.default.cardHeight / 1;\n    }\n    this.left = -((this.cards.length - 1) * _layout2.default.cardSep) / 2;\n    this.cards.forEach(function (c) {\n        c.adjustPos();\n    });\n};\n\nRow.prototype.getPosFor = function (ind, card) {\n    var pos = {};\n    if (card.parent.id === 0) pos = {\n        x: this.left + ind * _layout2.default.cardSep,\n        y: this.distance - 30,\n        rotation: this.rotation + (this.left + ind * _layout2.default.cardSep) / 24,\n        ind: ind,\n        rootRotation: this.rotation,\n        rotateY: this.flipped ? 180 : 0,\n        z: ind\n    };else pos = {\n        x: (this.left + ind * _layout2.default.cardSep) / 4,\n        y: this.distance,\n        rotation: this.rotation,\n        ind: ind,\n        rootRotation: this.rotation,\n        rotateY: this.flipped ? 180 : 0,\n        z: ind\n    };\n\n    if (this.curShifted.indexOf(this.cards[ind]) > -1) {\n        pos.y -= 30;\n    }\n    return pos;\n};\n\nRow.prototype.sort = function () {\n    this.cards.sort(function (a, b) {\n        if (a.suit !== b.suit) return b.suit - a.suit;\n        return a.num - b.num;\n    }).forEach(function (v, ind) {\n        v.ind = ind;\n    });\n    this.adjustPos();\n};\n\nRow.prototype.addShift = function (nc) {\n    (0, _game_sendCard2.default)(this, nc, window.game);\n    // if(this.curShifted.length === this.maxShift){\n    //     this.curShifted.shift();\n    // }\n    // this.curShifted.push(nc);\n    // if(this.curShifted.length === this.maxShift){\n    //     this.playedBy.rowSelected(this.maxShift);\n    // }\n    this.adjustPos();\n};\n\nRow.prototype.out = function (card) {\n    card.parent = null;\n    var ind = this.cards.indexOf(card);\n    this.curShifted = [];\n    this.cards.splice(ind, 1);\n    for (var i = ind; i < this.cards.length; i++) {\n        this.cards[i].ind = i;\n    }\n    this.adjustPos();\n};\n\nRow.prototype.removeShift = function (nc) {\n    this.curShifted = this.curShifted.filter(function (v) {\n        return v !== nc;\n    });\n    this.playedBy.rowDeselected();\n    this.adjustPos();\n};\n\nRow.prototype.hideOut = function (ind) {\n    var tmp = this.cards[ind];\n    var mid = Math.floor(this.cards.length / 2);\n    this.cards[ind] = this.cards[mid];\n    this.cards[mid] = tmp;\n    this.cards[ind].ind = ind;\n    this.cards[mid].ind = mid;\n    if (!window.isDebug) {\n        this.cards[ind].display.style[vendorPrefix + 'Transition'] = 'none';\n        this.cards[mid].display.style[vendorPrefix + 'Transition'] = 'none';\n    }\n    this.cards[mid].adjustPos();\n    this.cards[ind].adjustPos();\n    if (!window.isDebug) {\n        this.cards[ind].display.style[vendorPrefix + 'Transition'] = '';\n        this.cards[mid].display.style[vendorPrefix + 'Transition'] = '';\n    }\n    var self = this;\n    setTimeout(function () {\n        self.out(mid, true);\n    }, window.isDebug ? 0 : 100);\n};\n\nexports.default = Row;\n\n},{\"./game_sendCard\":23,\"./layout\":25}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Brain = require('./Brain');\n\nvar _Brain2 = _interopRequireDefault(_Brain);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SimpleBrain = function SimpleBrain(user) {\n    _Brain2.default.call(this, user);\n};\n\nSimpleBrain.prototype = Object.create(_Brain2.default.prototype);\n\nSimpleBrain.prototype.decide = function (vc, board) {\n    var len = vc.length,\n        suit = -1,\n        maxNum = -1;\n\n    return $.Deferred().resolve(function () {\n        if (board.length) {\n            suit = board[0].suit;\n            maxNum = board.reduce(function (prev, cur) {\n                if (cur.suit === suit && cur.num > prev) {\n                    return cur.num;\n                } else {\n                    return prev;\n                }\n            }, 0);\n            return vc.reduce(function (prev, cur) {\n                if (prev.suit === cur.suit) {\n                    if (cur.suit === suit) {\n                        if (cur.num < maxNum) {\n                            if (prev.num > maxNum || prev.num < cur.num) return cur;else return prev;\n                        } else if (cur.num > maxNum && prev.num > maxNum && board.length === 3) {\n                            if (cur.num > prev.num) return cur;else return prev;\n                        } else if (cur.num < prev.num) {\n                            return cur;\n                        } else {\n                            return prev;\n                        }\n                    } else {\n                        if (cur.num > prev.num) return cur;else return prev;\n                    }\n                } else {\n                    if (cur.suit === 0 && cur.num === 11) return cur;\n                    if (prev.suit === 0 && prev.num === 11) return prev;\n                    if (cur.suit === 1) return cur;\n                    if (prev.suit === 1) return prev;\n                    if (cur.num > prev.num) return cur;\n                    return prev;\n                }\n            }).ind;\n        } else {\n            return vc.reduce(function (prev, cur) {\n                if (prev.num > cur.num) return cur;else return prev;\n            }).ind;\n        }\n    }());\n};\n\nexports.default = SimpleBrain;\n\n},{\"./Brain\":3}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _layout = require('./layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Waste = function Waste(id, player) {\n    this.id = id;\n    this.isVertical = id % 2;\n    this.rotation = 90 * ((id + 1) % 4) - 90;\n    this.cards = [];\n    this.playedBy = player;\n};\n\nWaste.prototype.adjustPos = function () {\n    if (this.isVertical) {\n        this.distance = _layout2.default.width / 2 + _layout2.default.rowMargin + _layout2.default.cardHeight / 2;\n    } else {\n        this.distance = _layout2.default.height / 2 + _layout2.default.rowMargin + _layout2.default.cardHeight / 2;\n    }\n    this.cards.forEach(function (c) {\n        c.adjustPos();\n    });\n};\n\nWaste.prototype.getPosFor = function (ind) {\n    return {\n        x: 0,\n        y: this.distance,\n        rotation: this.rotation,\n        z: ind + 52,\n        rotateY: 0\n    };\n};\n\nWaste.prototype.addCards = function (cards) {\n    this.playedBy.incrementScore(cards.reduce(function (p, c) {\n        if (c.suit === 1) {\n            return p + 1;\n        } else if (c.suit === 0 && c.num === 11) {\n            return p + 13;\n        } else {\n            return p;\n        }\n    }, 0));\n    var finalCard = void 0;\n    for (var i = 0; i < cards.length; i++) {\n        if (cards[i].pos.rotation === this.rotation) {\n            cards[i].pos.z = 104;\n            finalCard = cards[i];\n        } else {\n            cards[i].pos.rotation = this.rotation;\n            this.addCard(cards[i]);\n        }\n    }\n\n    this.addCard(finalCard);\n    var self = this;\n    setTimeout(function () {\n        self.adjustPos();\n    }, 300);\n};\n\nWaste.prototype.addCard = function (card) {\n    card.parent = this;\n    card.ind = this.cards.length;\n    this.cards.push(card);\n};\n\nexports.default = Waste;\n\n},{\"./layout\":25}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Card = require('./Card');\n\nvar _Card2 = _interopRequireDefault(_Card);\n\nvar _layout = require('./layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar cards = [];\n////import $ from './jquery-2.0.3.min'\n\nfor (var i = 0; i < 52; i++) {\n    cards.push(new _Card2.default(i));\n}\n\nvar carddeck = [];\nfor (i = 0; i < 52; i++) {\n    carddeck.push(i);\n}\nexports.default = {\n    cards: cards,\n    init: function init() {\n        this.desk.cards.length = 0;\n        this.desk.players.length = 0;\n        var self = this;\n        this.cards.forEach(function (c) {\n            c.parent = self;\n            c.display.setSelectable(false);\n        });\n    },\n    shuffleDeck: function shuffleDeck() {\n        var i;\n\n        for (i = 0; i < 52; i++) {\n            var ran = Math.floor(Math.random() * (52 - i));\n            var tmp = carddeck[ran];\n            carddeck[ran] = carddeck[51 - i];\n            carddeck[51 - i] = tmp;\n        }\n\n        for (i = 51; i >= 0; i--) {\n            this.cards[carddeck[i]].ind = carddeck[i];\n            this.cards[carddeck[i]].adjustPos();\n        }\n    },\n    distribute: function distribute(players) {\n        /*  alert('dis');\r\n            var curI = 0;\r\n          var d = $.Deferred();\r\n          function move(){\r\n              if(curI === cards.length){\r\n                  setTimeout(function(){\r\n                      d.resolve();\r\n                  }, 200);\r\n                  return;\r\n              }\r\n              players[curI % 4].row.addCard(cards[carddeck[curI]]);\r\n              players[curI % 4].row.adjustPos();\r\n              curI++;\r\n              setTimeout(move, 100);\r\n          }\r\n          setTimeout(function(){move();}, 300);\r\n            return d;*/\n    },\n    setHakem: function setHakem(players) {\n\n        var curI = 0;\n        var d = $.Deferred();\n\n        // players[0].row.addCard(cards[1]);\n        function move() {\n            if (curI === cards.length) {\n                setTimeout(function () {\n                    d.resolve();\n                }, 200);\n                return;\n            }\n            //players[curI % 4].row.addCard(cards[carddeck[curI]]);\n            //   players[curI % 4].row.addCard(cards[carddeck[curI]]);\n            //   players[curI % 4].row.addCard(cards[curI]);\n            // alert(cards[curI]);\n            players[curI % 4].row.adjustPos();\n            curI++;\n            setTimeout(move, 100);\n        }\n\n        setTimeout(function () {\n            move();\n        }, 300);\n\n        return d;\n    },\n\n    getPosFor: function getPosFor(ind) {\n        return {\n            x: (52 - ind) / 4,\n            y: (52 - ind) / 4,\n            z: -i,\n            rotateY: 180\n        };\n    },\n    desk: {\n        cards: [],\n        players: [],\n        curScore: 0,\n        getPosFor: function getPosFor(ind) {\n            var pos = {\n                x: 0,\n                y: _layout2.default.cardHeight / 2 + _layout2.default.cardWidth / 2,\n                z: ind + 52,\n                rotateY: 0\n            };\n            pos.rotation = this.cards[ind].pos.rotation;\n            return pos;\n        },\n        addCard: function addCard(card, player) {\n            card.pos.rotation = card.pos.rootRotation;\n            card.ind = this.cards.length;\n            this.cards.push(card);\n            this.players.push(player);\n            card.parent = this;\n        },\n        adjustPos: function adjustPos() {\n            this.cards.forEach(function (c) {\n                c.adjustPos();\n            });\n        },\n        score: function score() {\n            var max = 0;\n            for (var i = 1; i < 4; i++) {\n                if (this.cards[i].suit === this.cards[max].suit && this.cards[i].num > this.cards[max].num) {\n                    max = i;\n                }\n            }\n            var p = this.players[max],\n                self = this;\n            var nextTime = 600,\n                time = 800;\n            if (window.isDebug) {\n                nextTime = 0;\n                time = 0;\n            }\n            var info = [this.players[max], [].concat(this.cards)];\n            this.players.length = 0;\n            this.cards.length = 0;\n\n            return info;\n        }\n    },\n    moveCard: {\n        toPlayer: function toPlayer(id, card, players) {\n            players[id].row.addCard(cards[card]);\n            players[id].row.sort();\n        }\n    },\n    newCards: function newCards() {\n        var cards = [];\n        for (var i = 0; i < 52; i++) {\n            cards.push(new _Card2.default(i));\n        }\n    },\n    selectibleCard: function selectibleCard(card, x) {\n        cards[card].display.setSelectable(x);\n    }\n};\n\n},{\"./Card\":4,\"./layout\":25}],16:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar names;\nvar myName = void 0;\nvar levels = [-1, 1, 2, 3];\nvar location;\nvar players;\nvar room_id;\nvar suit;\nvar wasteCards = [];\n\nvar STN = {\n    buttom: 0,\n    left: 1,\n    top: 2,\n    right: 3\n};\nvar NTS = {\n    0: \"bottom\",\n    1: \"left\",\n    2: \"top\",\n    3: \"right\"\n};\n\nexports.default = {\n    setMyName: function setMyName(name) {\n        myName = name;\n    },\n    getMyName: function getMyName() {\n        return myName;\n    },\n    getNames: function getNames() {\n        return names;\n    },\n    levels: levels,\n    sync: function sync() {\n        /*  localStorage.setItem(\"names\", JSON.stringify(names));\r\n          localStorage.setItem(\"levels\", JSON.stringify(levels));*/\n    },\n    setLocation: function setLocation(l) {\n        location = l;\n    },\n    getLocation: function getLocation() {\n        return location;\n    },\n    getPlayers: function getPlayers(array) {\n        var me = void 0;\n        var others = [];\n        array.forEach(function (player) {\n            if (player.location === location) me = player;else others.push(player);\n        });\n        return { me: me, others: others };\n    },\n    getLocOfPlayers: function getLocOfPlayers(player) {\n        if (location === 0) {\n            if (player.location === 0) return 0;\n            if (player.location === 1) return 1;\n            if (player.location === 3) return 3;\n            if (player.location === 2) return 2;\n        } else if (location === 1) {\n            if (player.location === 0) return 3;\n            if (player.location === 1) return 0;\n            if (player.location === 3) return 2;\n            if (player.location === 2) return 1;\n        } else if (location === 3) {\n            if (player.location === 0) return 1;\n            if (player.location === 1) return 2;\n            if (player.location === 3) return 0;\n            if (player.location === 2) return 3;\n        } else if (location === 2) {\n            if (player.location === 0) return 2;\n            if (player.location === 1) return 3;\n            if (player.location === 3) return 1;\n            if (player.location === 2) return 0;\n        }\n    },\n    getPlayersSaved: function getPlayersSaved() {\n        return players;\n    },\n    setNames: function setNames(namesOBJ) {\n        // alert('set name');\n        names = namesOBJ;\n    },\n    setRoom_id: function setRoom_id(x) {\n        room_id = x;\n    },\n    setSuit: function setSuit(x) {\n        suit = x;\n    },\n    getSuit: function getSuit() {\n        return suit;\n    },\n    getRoom_id: function getRoom_id() {\n        return room_id;\n    },\n    get: function get() {\n        return this;\n    },\n    getWasteCards: function getWasteCards() {\n        return wasteCards;\n    },\n    setWasteCards: function setWasteCards(x) {\n        wasteCards = x;\n    }\n};\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.setName = undefined;\n\nexports.default = function () {\n    Game.connect();\n};\n\nvar _socket_io = require('./socket_io');\n\nvar _socket_io2 = _interopRequireDefault(_socket_io);\n\nvar _loadingPage = require('./loadingPage');\n\nvar _loadingPage2 = _interopRequireDefault(_loadingPage);\n\nvar _NamePage = require('./NamePage');\n\nvar _NamePage2 = _interopRequireDefault(_NamePage);\n\nvar _game_core = require('./game_core');\n\nvar _game_core2 = _interopRequireDefault(_game_core);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _Debug = require('./Debug');\n\nvar _Debug2 = _interopRequireDefault(_Debug);\n\nvar _ui = require('./ui');\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar room = void 0;\n\nvar nameSpace = void 0;\nvar socket = null;\nvar socket_ID = null;\n//const serverPort = 443;\nvar last_mess_id = 0;\nvar setIntervalTime = 15000;\nvar lastCOM = void 0;\nvar evenDisconnected = false;\nvar pingTimeStart = null;\nvar pinginterval = null;\nvar pingResp = true;\nvar token = void 0;\n\nvar pingTimeDom = $(\"#pingTime\");\n\nvar Game = {\n    connect: function connect() {\n        var url = new URL(document.location.href);\n        this.userName = this.userName || url.searchParams.get('userName');\n        if (!this.userName) return (0, _NamePage2.default)();\n        this.id = url.searchParams.get('id');\n        this.game_id = url.searchParams.get('game') || undefined;\n        this.rounds = parseInt(url.searchParams.get('rounds')) || undefined;\n\n        connectTOS();\n    },\n    setName: function setName(name) {\n        this.userName = name;\n        this.connect();\n    }\n};\n\nfunction socketConnect() {\n    socket = (0, _socket_io2.default)('/Hokm', {\n        reconnection: true,\n        reconnectionDelay: 200,\n        reconnectionDelayMax: 1000,\n        transports: ['websocket']\n    });\n    socket.heartbeatTimeout = 5000;\n    return socket;\n}\n\nvar join_room = function join_room() {\n    var id = Game.id,\n        userName = Game.userName,\n        game_id = Game.game_id,\n        rounds = Game.rounds;\n\n    socket.emit('JOIN_ME', { id: id, userName: userName, game_id: game_id, rounds: rounds });\n    $('#login_page').removeClass('show').addClass('hide');\n    _ui2.default.showMessage(\"تا رسیدن بقیه بازیکن ها صبر کنید.\");\n    _loadingPage2.default.load(true);\n};\nvar connectTOS = function connectTOS() {\n    socket = socketConnect();\n    window.socket = socket;\n    socket.on(\"connect\", onConnect);\n    socket.on(\"disconnect\", function (r) {\n        pingTimeDom.html(\"Disconnected !\");\n        evenDisconnected = true;\n        console.log(\"socket disconnect\", r);\n        _Debug2.default.log(\"disconnect\");\n    });\n    socket.on('config', function (mess) {\n        console.log('config', mess);\n        _config2.default.setRoom_id(mess.room_id);\n        _config2.default.setLocation(mess.location);\n    });\n    socket.on('GAME', function (mess) {\n        console.log(mess);\n        lastCOM = mess;\n        if (mess.mess_ID) {\n            console.log(mess.mess_ID);\n            var mess_ID = mess.mess_ID;\n\n            if (mess_ID - last_mess_id === 1) {\n                socket.emit('_CALLBACK', mess_ID);\n                last_mess_id = mess_ID;\n            } else {\n                socket.emit('_setMeMaster', last_mess_id);\n                console.warn('bad mess ID', { last_mess_id: last_mess_id, mess_ID: mess_ID });\n            }\n        }\n        (0, _game_core2.default)(mess);\n        _Debug2.default.log(\"GAME\", mess);\n    });\n    socket.on('connect_error', function (error) {\n        return console.log('connect_error', error);\n    });\n    socket.on('error', function (error) {\n        console.log('error', error);\n        _Debug2.default.log(\"socket error\", error);\n    });\n    socket.on('connect_timeout', function (error) {\n        return console.log('connect_timeout', error);\n    });\n    socket.on('reconnect', function (x) {\n        return console.log('reconnect', x);\n    });\n    socket.on('reconnecting', function (x) {\n        return console.log('reconnecting', x);\n    });\n    socket.on('reconnect_error', function (x) {\n        return console.log('reconnect_error', x);\n    });\n    socket.on('reconnect_failed', function (x) {\n        return console.log('reconnect_failed', x);\n    });\n    socket.on('S_ERR', function (res) {\n        return (0, _game_core2.default)({ COM: 'alert', res: res });\n    });\n\n    socket.on('setSocketID', function (id) {\n        return socket_ID = id;\n    });\n    socket.on('room_id', function (room_id) {\n        return room = room_id;\n    });\n    socket.on('pongT', function () {\n        pingResp = true;\n        var newTime = new Date().getTime();\n        var pingTime = newTime - pingTimeStart;\n        updatePingDom(pingTime + \" ms\");\n    });\n    socket.on('debug', function (m) {\n        console.log('deb', m);\n        _Debug2.default.log(\"deb\", m);\n    });\n    socket.on('token', function (t) {\n        return token = t;\n    });\n};\n\nfunction onConnect() {\n    _Debug2.default.log(\"connected\");\n    pingTimeDom.html(\"Connected\");\n    if (token) socket.emit('token', token);else if (!evenDisconnected) join_room();else alert(\"اتصال شما با سرور ناپایدار است.\");\n    window.gameEmitor = function (COM, res) {\n        if (!socket.connected) return alert('اتصال شما با سرور قطع شده است');\n        socket.emit('GAME', {\n            COM: COM,\n            res: res\n        });\n    };\n    _loadingPage2.default.errBoxRemove();\n    if (pinginterval) clearInterval(pinginterval);\n    pinginterval = setInterval(ping, setIntervalTime);\n}\n\nfunction ping() {\n    if (!pingResp) updatePingDom(\"Time Out!!\");\n    pingResp = false;\n    pingTimeStart = new Date().getTime();\n    socket.emit('pingT', true);\n}\n\nfunction updatePingDom(ping) {\n    pingTimeDom.html(ping);\n}\n\npingTimeDom.on('click', function () {\n    window.socket.emit(\"debug\");\n    _Debug2.default.show();\n});\n\nvar setName = exports.setName = function setName(name) {\n    Game.setName(name);\n};\n\n},{\"./Debug\":5,\"./NamePage\":7,\"./config\":16,\"./game_core\":22,\"./loadingPage\":26,\"./socket_io\":30,\"./ui\":31}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar chats = ['سلام!', '❤️😍', 'چه دستی!', 'دمت گرم!', 'زود باش', 'خیلی کارت درسته!', 'چرا؟', 'از من یاد بگیر', 'عالیییییی!', '👌👌', 'اینم دسته؟'];\nvar suits = ['spade', 'heart', 'club', 'diamond'];\nvar cardTrans = {\n    A: 1,\n    2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10,\n    J: 11, Q: 12, K: 13\n};\n\nvar frag = void 0;\n\nvar CardDisplay = function CardDisplay(dom) {\n    this.dom = $(dom);\n    this.dom.on(\"click\", function () {\n        ///click every card\n        this.onClick && this.onClick();\n    }.bind(this));\n};\nvar getCardIconPos = function getCardIconPos(numtext) {\n    var num = cardTrans[numtext] - 1;\n    var posY = Math.floor(num / 5);\n    var posX = num % 5;\n    return {\n        x: posX * -82,\n        y: posY * -107\n    };\n};\n\nCardDisplay.prototype.adjustPos = function (pos) {\n    if (!pos.rotation) {\n        pos.rotation = 0;\n    }\n    if (!pos.rotateY) {\n        pos.rotateY = 0;\n    }\n    var zIndex = 10 + pos.z;\n    this.dom.css({\n        zIndex: zIndex,\n        transform: 'rotate(' + pos.rotation + 'deg) translate3d(' + pos.x + 'px, ' + pos.y + 'px, ' + pos.z + 'px) rotateY(' + pos.rotateY + 'deg)'\n    });\n    this.zIndex = zIndex;\n};\n\nCardDisplay.prototype.setSelectable = function (yes) {\n    var self = this;\n    if (yes) {\n        this.dom.addClass(\"movable\");\n        this.dom.css({\n            zIndex: self.zIndex + 50\n        });\n    } else {\n        this.dom.removeClass(\"movable\");\n    }\n};\n\nCardDisplay.prototype.grayScale = function (yes) {\n    yes ? this.dom.addClass(\"grayScale\") : this.dom.removeClass(\"grayScale\");\n};\n\nCardDisplay.prototype.isSelectable = function () {\n    return this.dom.is(\".movable\");\n};\n\nvar PlayerDisplay = function PlayerDisplay(id, name, human) {\n\n    this.id = id;\n    this.display = document.createElement('div');\n    this.display.className = 'info-board board-' + id;\n    if (id === 0) this.display.className = 'info-board selfBoard board-' + id;\n    this.nametext = document.createElement('div');\n    this.nametext.className = 'player-name';\n    this.nametext.innerHTML = name;\n\n    this.hakemTag = document.createElement('div');\n    this.hakemTag.className = 'hakemTag';\n\n    this.chatbar = document.createElement('div');\n    this.chatbar.className = 'chatbar';\n\n    this.display.appendChild(this.nametext);\n    this.display.appendChild(this.hakemTag);\n    this.display.appendChild(this.chatbar);\n\n    frag.appendChild(this.display);\n\n    this.rank = null;\n};\n\nPlayerDisplay.prototype.setName = function (name) {\n    this.nametext.innerHTML = name;\n};\nPlayerDisplay.prototype.setHakem = function (yes) {\n    if (yes) {\n        this.hakemTag.className += \" true\";\n    } else this.hakemTag.className = \"hakemTag\";\n};\nPlayerDisplay.prototype.setTurn = function (val) {\n    var display = $(this.display);\n    val ? display.addClass(\"highlight\") : display.removeClass(\"highlight\");\n};\nPlayerDisplay.prototype.showChat = function (mess) {\n    var chatbar = $(this.chatbar);\n    chatbar.removeClass('anim');\n    void this.chatbar.offsetWidth;\n    chatbar.html(mess).addClass('anim');\n};\n\nPlayerDisplay.prototype.offline = function (mode) {\n    var display = $(this.display);\n    mode ? display.addClass('offline') : display.removeClass('offline');\n};\n\nPlayerDisplay.prototype.setHuman = function (yes) {\n    if (yes) {\n        this.display.className += \" human\";\n    }\n};\n\nPlayerDisplay.prototype.setHighlight = function (yes) {\n    if (yes) {\n        $(this.display).addClass(\"highlight\");\n    } else {\n        $(this.display).removeClass(\"highlight\");\n    }\n};\n\nPlayerDisplay.prototype.adjustPos = function () {};\n\nPlayerDisplay.prototype.setScoreText = function (text) {\n    //  this.scoretext.innerHTML = text;\n};\n\nPlayerDisplay.prototype.setFinalText = function (text) {\n    //  this.finaltext.innerHTML = text;\n};\n\nPlayerDisplay.prototype.highlight = function () {\n    // var b = this.scoretext.classList;\n    // b.add('highlight');\n    // setTimeout(function(){\n    //     b.remove('highlight');\n    // }, 100);\n};\n\nvar ChatDesk = function ChatDesk() {\n    this.display = document.createElement('div');\n    var chatsSider = document.createElement('div');\n    chatsSider.classList = \"chatsSider\";\n    chats.forEach(function (chatMess) {\n        var chat = document.createElement('div');\n        chat.innerHTML = chatMess;\n        chat.className = \"chatBox\";\n        chat.onclick = function () {\n            window.gameEmitor(\"chat\", chatMess);\n        };\n        chatsSider.appendChild(chat);\n    });\n    this.display.appendChild(chatsSider);\n    this.display.className = 'chatDesk';\n};\n\nexports.default = {\n    fragmentToDom: function fragmentToDom(dom) {\n        if (frag) {\n            dom.appendChild(frag);\n            frag = null;\n        }\n    },\n    createChatDesk: function createChatDesk() {\n        var cd = new ChatDesk();\n        frag.appendChild(cd.display);\n    },\n    createPlayerDisplay: function createPlayerDisplay(id, name) {\n        return new PlayerDisplay(id, name);\n    },\n    createCardDisplay: function createCardDisplay(numtext, suit) {\n        if (!frag) {\n            frag = document.createDocumentFragment();\n        }\n        var display = document.createElement('div');\n        display.className = 'card flipped';\n        $(display).css({\n            transform: 'rotateY(180deg)'\n        });\n\n        var numText = document.createElement('div');\n        numText.className = 'num';\n        numText.innerHTML = numtext;\n\n        var front = document.createElement('div');\n        front.className = 'front';\n        //front.appendChild(numText);\n        //display.classList.add(suits[suit]);\n        var cardPicPos = getCardIconPos(numtext);\n\n        var pic = document.createElement('div');\n        $(pic).css({\n            background: 'url(../files/img/card/' + suit + '.png) ' + cardPicPos.x + 'px ' + cardPicPos.y + 'px',\n            scale: \"1.2\"\n        });\n        pic.className = 'card_pic';\n\n        var icon = document.createElement('div');\n        icon.className = 'icon';\n        front.appendChild(icon);\n        front.appendChild(pic);\n\n        display.appendChild(front);\n\n        var back = document.createElement('div');\n        back.className = 'back';\n\n        display.appendChild(back);\n\n        frag.appendChild(display);\n\n        return new CardDisplay(display);\n    }\n};\n\n},{}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar files = ['./files/img/carp.jpg', './files/img/club.png', './files/img/crown.png', './files/img/diamond.png', './files/img/flip.png', './files/img/heart.png', './files/img/card/0.png', './files/img/card/1.png', './files/img/card/2.png', './files/img/card/3.png'];\nvar filesLoaded = 0;\nvar progressBar = $('#progress_bar');\nvar fileOnload = function fileOnload() {\n    filesLoaded++;\n    var persent = Math.floor(filesLoaded / files.length * 100);\n    progressBar.css('width', persent + '%');\n    if (filesLoaded === files.length) $('.progress_bar').addClass('hide');\n};\n\nexports.default = function () {\n    return Promise.all(files.map(function (f) {\n        return new Promise(function (resolve) {\n            var newImg = new Image();\n            newImg.onload = function () {\n                fileOnload();\n                resolve();\n            };\n            newImg.src = f;\n        });\n    }));\n};\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar responsive = function responsive() {\n\n    var basePage = {\n        width: 1000,\n        m_width: 600,\n        height: 750,\n        m_height: 450,\n        scale: 1,\n        scaleX: 1,\n        scaleY: 1\n    };\n\n    var page = $('#game_view');\n    var body = $('body');\n\n    scalePages(page, window.innerWidth, window.innerHeight);\n    $(window).resize(function () {\n        return scalePages(page, window.innerWidth, window.innerHeight);\n    });\n\n    function scalePages(page, maxWidth, maxHeight) {\n        var scaleX = 1,\n            scaleY = 1;\n\n        if (maxWidth > maxHeight) {\n            // landscape\n            scaleX = maxWidth / basePage.width;\n            scaleY = maxHeight / basePage.height;\n            basePage.scaleX = scaleX;\n            basePage.scaleY = scaleY;\n\n            basePage.scale = scaleX > scaleY ? scaleY : scaleX;\n        } else if (maxWidth <= maxHeight) {\n            // portrait\n            scaleX = maxWidth / basePage.m_width;\n            scaleY = maxHeight / basePage.m_height;\n            basePage.scaleX = scaleX;\n            basePage.scaleY = scaleY;\n            basePage.scale = scaleX;\n        }\n\n        var width = Math.abs(Math.ceil(maxWidth / basePage.scale));\n        var height = Math.abs(Math.ceil(maxHeight / basePage.scale));\n        if (basePage.scale >= 1) {\n            basePage.scale = 1;\n            width = maxWidth;\n            height = maxHeight;\n        }\n        page.attr('style', '-webkit-transform:scale(' + basePage.scale + '); width:' + width + 'px; height:' + height + 'px;');\n    }\n};\n\nfunction toggleFullScreen() {\n    if (!document.fullscreenElement) document.documentElement.requestFullscreen();else if (document.exitFullscreen) document.exitFullscreen();\n}\n\nfunction preventDefault(e) {\n    if (e.preventDefault) e.preventDefault();\n}\n\nfunction disable_scroll_mobile() {\n    document.addEventListener('touchmove', preventDefault, false);\n}\n\nexports.default = function () {\n    disable_scroll_mobile();\n    window.scrollTo(0, 0);\n    responsive();\n    window.scrollTo(0, 0);\n    document.ondblclick = toggleFullScreen;\n};\n\n},{}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ui = require('./ui');\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _Human = require('./Human');\n\nvar _Human2 = _interopRequireDefault(_Human);\n\nvar _Ai = require('./Ai');\n\nvar _Ai2 = _interopRequireDefault(_Ai);\n\nvar _board = require('./board');\n\nvar _board2 = _interopRequireDefault(_board);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _rules = require('./rules');\n\nvar _rules2 = _interopRequireDefault(_rules);\n\nvar _RandomBrain = require('./RandomBrain');\n\nvar _RandomBrain2 = _interopRequireDefault(_RandomBrain);\n\nvar _AsyncBrain = require('./AsyncBrain');\n\nvar _AsyncBrain2 = _interopRequireDefault(_AsyncBrain);\n\nvar _SimpleBrain = require('./SimpleBrain');\n\nvar _SimpleBrain2 = _interopRequireDefault(_SimpleBrain);\n\nvar _PomDPBrain = require('./PomDPBrain');\n\nvar _PomDPBrain2 = _interopRequireDefault(_PomDPBrain);\n\nvar _domBinding = require('./domBinding');\n\nvar _domBinding2 = _interopRequireDefault(_domBinding);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar players = [];\nvar rounds = void 0;\nvar status = void 0,\n    currentPlay = void 0,\n    played = void 0;\nvar heartBroken = void 0;\nvar nextTimer = void 0;\nvar waitDefer = void 0;\nvar initBrains = void 0;\nvar informCardOut = void 0;\nvar adds = void 0;\nvar getPlayerForTransfer = void 0;\n\nvar game = {};\ngame.load = function () {\n    rounds = 0;\n    players = [new _Human2.default(0, _config2.default.getNames()[0]), new _Ai2.default(1, _config2.default.getNames()[1]), new _Ai2.default(2, _config2.default.getNames()[2]), new _Ai2.default(3, _config2.default.getNames()[3])];\n\n    status = \"prepare\";\n    currentPlay = 0;\n    played = 0;\n\n    heartBroken = false;\n\n    nextTimer = 0;\n    _domBinding2.default.createChatDesk();\n\n    waitDefer = function waitDefer(time) {\n        var d = $.Deferred();\n        setTimeout(function () {\n            d.resolve();\n        }, time);\n        return d;\n    };\n\n    initBrains = function initBrains() {\n        // players[0].brain = new AsyncBrain(players[0], \"PomDPBrain\");\n\n        if (players[1].brain) {\n            players[1].brain.terminate();\n            players[2].brain.terminate();\n            players[3].brain.terminate();\n        }\n\n        for (var i = 1; i < 4; i++) {\n            if (_config2.default.levels[i] == 1) {\n                players[i].brain = new _SimpleBrain2.default(players[i]);\n            } else if (_config2.default.levels[i] == 2) {\n                players[i].brain = new _AsyncBrain2.default(players[i], \"McBrain\");\n            } else if (_config2.default.levels[i] == 3) {\n                players[i].brain = new _AsyncBrain2.default(players[i], \"PomDPBrain\");\n            } else if (_config2.default.levels[i] == 4) {\n                players[i].brain = new _AsyncBrain2.default(players[i], \"PomDPBrain\", { time: 2000 });\n            }\n        }\n\n        return $.when(players[1].brain.init(), players[2].brain.init(), players[3].brain.init());\n    };\n\n    informCardOut = function informCardOut(player, card) {\n        if (card.suit === 1) {\n            heartBroken = true;\n        }\n        players.forEach(function (p) {\n            p.watch({\n                type: \"out\",\n                player: player,\n                card: card,\n                curSuit: _board2.default.desk.cards[0].suit\n            });\n        });\n    };\n\n    adds = [1, 3, 2];\n    getPlayerForTransfer = function getPlayerForTransfer(id) {\n        return (id + adds[rounds % 3]) % 4;\n    };\n};\n\ngame.run = {\n    adjustLayout: function adjustLayout() {\n        players.forEach(function (r) {\n            r.adjustPos();\n        });\n        _board2.default.desk.adjustPos();\n    },\n    newGame: function newGame() {\n        clearTimeout(nextTimer);\n        _ui2.default.hideWin();\n        players.forEach(function (p, i) {\n            p.clearScore();\n            p.setActive(false);\n            p.setName(_config2.default.getNames()[i]);\n            p.setName(_config2.default.getNames()[i]);\n        });\n        rounds = 0;\n        _ui2.default.clearEvents();\n        status = 'prepare';\n        this.proceed();\n    },\n    next: function next() {\n        console.log(status, \"next\");\n        if (status == 'confirming') {\n            currentPlay = _board2.default.cards[26].parent.playedBy.id;\n            played = 0;\n        } else if (status == 'playing') {\n            currentPlay = (currentPlay + 1) % 4;\n            played++;\n        }\n        if (played == 4) {\n            status = 'endRound';\n            played = 0;\n        } else if (status == 'endRound' && players[0].row.cards.length === 0) {\n            status = 'end';\n        } else {\n            status = {\n                // 'prepare': 'setHakem', this1\n                'setHakem': 'distribute',\n                'distribute': 'start',\n                'start': 'passing',\n                'passing': 'confirming',\n                'confirming': 'playing',\n                'playing': 'playing',\n                'endRound': 'playing',\n                'end': 'prepare'\n            }[status];\n        }\n        var waitTime = {\n            'playing': 100,\n            'endRound': 900,\n            'distribute': 300,\n            'end': 900\n        };\n        var wait = waitTime[status] || 0;\n        nextTimer = setTimeout(this.proceed.bind(this), wait);\n    },\n    proceed: function proceed() {\n        ({\n            'prepare': function prepare() {\n                _ui2.default.hideMessage();\n                _ui2.default.hideButton();\n                players.forEach(function (p) {\n                    p.initForNewRound();\n                    p.inSethakem(true);\n                });\n                _board2.default.init();\n                heartBroken = false;\n                _board2.default.shuffleDeck();\n                //  initBrains().done(this.next.bind(this));\n\n            },\n            'setHakem': function setHakem() {\n                var self = this;\n                _board2.default.setHakem(players).done(function () {\n                    players.forEach(function (p) {\n                        p.row.sort();\n                    });\n                    //self.next();\n                });\n            },\n            \"clearTable\": function clearTable() {\n                //ui.hideMessage();\n                _ui2.default.hideButton();\n                //board.newCards();\n                players.forEach(function (p) {\n                    p.inSethakem(false);\n                    p.initForNewRound();\n                    p.clearScore();\n                });\n                players[0].inSethakem(true);\n                _board2.default.init();\n                _board2.default.shuffleDeck();\n            },\n            \"newRound\": function newRound() {\n                //  var self = this;\n                /* board.setHakem(players).done(function(){\r\n                     players.forEach(function(p){\r\n                         p.row.sort();\r\n                     });\r\n                     //self.next();\r\n                   });*/\n                players.forEach(function (p) {\n                    p.row.sort();\n                });\n            },\n            'distribute': function distribute() {\n                var self = this;\n                _board2.default.distribute(players).done(function () {\n                    players.forEach(function (p) {\n                        p.row.sort();\n                    });\n                    self.next();\n                });\n            },\n            'start': function start() {\n                rounds++;\n                $.when.apply($, players.map(function (p) {\n                    return p.prepareTransfer(rounds % 3);\n                })).done(this.next.bind(this));\n            },\n            'passing': function passing() {\n                for (var i = 0; i < 4; i++) {\n                    players[i].transferTo(players[getPlayerForTransfer(i)]);\n                }\n                this.next();\n            },\n            'confirming': function confirming() {\n                players.forEach(function (r) {\n                    r.row.sort();\n                });\n                $.when.apply($, players.map(function (p) {\n                    return p.confirmTransfer();\n                })).done(this.next.bind(this));\n            },\n            'playing': function playing() {\n                players[currentPlay].setActive(true);\n                $.when(players[currentPlay].decide(_rules2.default.getValidCards(players[currentPlay].row.cards, _board2.default.desk.cards[0] ? _board2.default.desk.cards[0].suit : -1, heartBroken), _board2.default.desk.cards, _board2.default.desk.players, players.map(function (p) {\n                    return p.getScore();\n                })), waitDefer(200)).done(function (card) {\n                    players[currentPlay].setActive(false);\n                    card.parent.out(card);\n                    _board2.default.desk.addCard(card, players[currentPlay]);\n                    card.adjustPos();\n                    informCardOut(players[currentPlay], card);\n                    this.next();\n                }.bind(this));\n            },\n            'endRound': function endRound() {\n                // let info = board.desk.score();\n                // currentPlay = info[0].id;\n                // console.log(currentPlay);\n                //   info[0].waste.addCards(info[1]);\n                //this.next();\n            },\n            'removeRow': function removeRow() {\n                // alert('deleteRow');\n                players.forEach(function (p) {\n                    p.row.cards.forEach(function (c) {\n                        c.parent = null;\n                    });\n                    p.row.cards = [];\n                });\n            },\n            'end': function end() {\n                if (players.some(function (p) {\n                    return p.getScore() === 26;\n                })) {\n                    players.forEach(function (p) {\n                        if (p.getScore() !== 26) {\n                            p.setScore(26);\n                        } else {\n                            p.setScore(0);\n                        }\n                    });\n                }\n                players.forEach(function (p) {\n                    p.finalizeScore();\n                });\n                var rank = players.map(function (c) {\n                    return c;\n                });\n                rank.sort(function (a, b) {\n                    return a._oldScore - b._oldScore;\n                });\n                rank.forEach(function (r, ind) {\n                    r.display.rank = ind;\n                });\n                players.forEach(function (p) {\n                    p.adjustPos();\n                });\n                if (players.some(function (p) {\n                    return p._oldScore >= 100;\n                })) {\n                    players.forEach(function (p) {\n                        p.display.moveUp = true;\n                        p.display.adjustPos();\n                    });\n                    _ui2.default.showWin(players[0] === rank[0]);\n                    _ui2.default.showButton(\"Restart\");\n                    _ui2.default.buttonClickOnce(this.newGame.bind(this));\n                } else {\n                    _ui2.default.showButton(\"Continue\");\n                    _ui2.default.buttonClickOnce(this.next.bind(this));\n                }\n            }\n        })[status].bind(this)();\n    },\n    setStatus: function setStatus(newStatus, andRun) {\n        status = newStatus;\n        if (andRun) this.proceed();\n    },\n    moveCard: {\n        toPlayer: function toPlayer(id, card) {\n            _board2.default.moveCard.toPlayer(id, card, players);\n        },\n        toTable: function toTable(player_id, card) {\n            card.parent.out(card);\n            _board2.default.desk.addCard(card, players[player_id]);\n            card.adjustPos();\n        }\n    },\n    setHakem: function setHakem(player_id) {\n        players.forEach(function (p) {\n            p.setHakem(false);\n        });\n        players[player_id].setHakem(true);\n    },\n    getPlayers: function getPlayers() {\n        return players;\n    },\n    toWast: function toWast(winnerCard) {\n        // players[0].waste.addCards(card);//////\n        var info = _board2.default.desk.score();\n        currentPlay = info[0].id;\n        info[0].waste.addCards(info[1], winnerCard);\n    },\n    chatPlayer: function chatPlayer(player_id, mess) {\n        players[player_id].display.showChat(mess);\n    },\n\n    returnPlayer: function returnPlayer(player_id) {\n        return players[player_id];\n    }\n};\n\nexports.default = game;\n\n},{\"./Ai\":1,\"./AsyncBrain\":2,\"./Human\":6,\"./PomDPBrain\":9,\"./RandomBrain\":11,\"./SimpleBrain\":13,\"./board\":15,\"./config\":16,\"./domBinding\":18,\"./rules\":29,\"./ui\":31}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n//import $ from './jquery-2.0.3.min'\n\n\nexports.default = function (mess) {\n    room_id = _config2.default.getRoom_id();\n    var COM = void 0;\n    var res = void 0;\n    if (mess.COM) COM = mess.COM;\n    if (mess.res) res = mess.res;\n    if (typeof routers[COM] === \"function\") routers[COM](res);\n};\n\nvar _loadingPage = require('./loadingPage');\n\nvar _loadingPage2 = _interopRequireDefault(_loadingPage);\n\nvar _main = require('./main');\n\nvar _main2 = _interopRequireDefault(_main);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _ui = require('./ui');\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _game = require('./game');\n\nvar _game2 = _interopRequireDefault(_game);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar cardDelay = 170;\n\nvar setHokmDOM = $('#setHokm');\nvar hokm_icon = $(\"#hokm_icon\");\nvar room_id = _config2.default.getRoom_id();\nvar gameEnd_frame = $('#gameEnd');\nvar desk = $(\"#team-score\");\nvar nextCOM = {};\nvar isRaadyForTurn = true;\n$('#hokm_gish').click(function () {\n    return send_hokm('gish');\n});\n$('#hokm_del').click(function () {\n    return send_hokm('del');\n});\n$('#hokm_pik').click(function () {\n    return send_hokm('pik');\n});\n$('#hokm_khesht').click(function () {\n    return send_hokm('khesht');\n});\nvar testBut = $(\"#testBut\");\ntestBut.click(function () {\n    window.socket.emit(\"getMyID\", true);\n});\n\nfunction send_hokm(hokm) {\n    if (window.socket.connected) {\n        window.gameEmitor('setHokm', { hokm: hokm });\n        setHokmDOM.removeClass('show').addClass('hide');\n    }\n}\n\n// const resolveNextCOM = function () {\n//   if (nextCOM && nextCOM.func) nextCOM.func(nextCOM.mess);\n//   nextCOM = {};\n// };\n\nvar game_start = function game_start(mess) {\n    var location = {};\n    _loadingPage2.default.errBoxRemove();\n    _loadingPage2.default.load(false);\n    var players = _config2.default.getPlayers(mess);\n    location = players.me.location;\n    if (location === 0) _config2.default.setNames([players.me.name, players.others[0].name, players.others[1].name, players.others[2].name]);\n    if (location === 1) _config2.default.setNames([players.me.name, players.others[1].name, players.others[2].name, players.others[0].name]);\n    if (location === 3) _config2.default.setNames([players.me.name, players.others[0].name, players.others[1].name, players.others[2].name]);\n    if (location === 2) _config2.default.setNames([players.me.name, players.others[2].name, players.others[0].name, players.others[1].name]);\n    (0, _main2.default)();\n};\nvar game_setHakem = function game_setHakem(mess) {\n    _game2.default.run.setStatus('setHakem', true);\n\n    var hakem = _config2.default.getLocOfPlayers(mess.hakem);\n    if (mess.roundOne) {\n        var start = _config2.default.getLocOfPlayers(mess.start);\n        for (var i = 0; i <= mess.i; i++) {\n            var player = (start + i) % 4;\n            _game2.default.run.moveCard.toPlayer(player, mess.cards[i]);\n        }\n    }\n    setTimeout(function () {\n        _game2.default.run.setHakem(hakem);\n        _ui2.default.showMoveMess('حاکم: ' + mess.hakem.name);\n    }, 1000);\n};\nvar game_newRound = function game_newRound(mess) {\n    if (mess.mode === 'setHokm') {\n        var cards = mess.hakemCards;\n        var hakem = mess.hakem;\n        _game2.default.run.setStatus('clearTable', true);\n        var hakem_location = _config2.default.getLocOfPlayers(hakem);\n        if (cards) cards.map(function (card) {\n            return _game2.default.run.moveCard.toPlayer(hakem_location, card);\n        });\n    } else if (mess.mode === 'allPlayers') {\n        var _cards = mess.cards;\n        var _hakem = mess.hakem;\n        var _hakem_location = _config2.default.getLocOfPlayers(_hakem);\n        if (_cards) {\n\n            var five = 0;\n            var r = 0,\n                newfive = 0;\n            var i = 0;\n            isRaadyForTurn = false;\n            var moveA = function moveA() {\n                if (r === 3) newfive = 1;\n                if (five === 5) {\n                    five = newfive;\n                    r++;\n                }\n                five++;\n                var player = (_hakem_location + r) % 4;\n                if (!(r === 0 && newfive === 0)) _game2.default.run.moveCard.toPlayer(player, mess.cards[i]);\n                i++;\n                moveB();\n            };\n\n            var moveB = function moveB() {\n                setTimeout(function () {\n                    if (i < _cards.length) moveA();else {\n                        // isRaadyForTurn = true;\n                        //resolveNextCOM();\n                    }\n                }, cardDelay);\n            };\n\n            moveA();\n        }\n    }\n};\nvar game_setHokm = function game_setHokm(mess) {\n    if (mess) {\n        _ui2.default.hideMessage();\n        var pos = _config2.default.getLocOfPlayers(mess);\n        if (pos === 0) setHokmDOM.removeClass('hide').addClass('show');\n    }\n};\nvar game_hokmSeted = function game_hokmSeted(mess) {\n    setHokmDOM.removeClass('show').addClass('hide');\n    var x = {\n        khesht: 'حکم خشت',\n        pik: 'حکم پیک',\n        del: 'حکم دل',\n        gish: 'حکم گیشنیز'\n    };\n    hokm_icon.removeClass().addClass(\"hokm_icon\").addClass(mess);\n    _ui2.default.showMoveMess(x[mess]);\n};\nvar game_setTurn = function game_setTurn(mess) {\n    //if (!isRaadyForTurn) return nextCOM = {func:game_setTurn , mess};\n    // isRaadyForTurn = true;\n    _ui2.default.hideMessage();\n    var players = _game2.default.run.getPlayers();\n    players.forEach(function (player) {\n        player.display.setTurn(false);\n    });\n    if (mess.player) {\n        var loc = _config2.default.getLocOfPlayers(mess.player);\n        if (loc === 0) {\n            _ui2.default.showMoveMess('نوبت شما');\n            var yourCard = _game2.default.run.getPlayers()[0].row.cards;\n            var suit = mess.suit;\n            _config2.default.setSuit(suit);\n            if (typeof suit === 'undefined') {\n                // don't use !suit\n                yourCard.forEach(function (card) {\n                    card.display.setSelectable(true);\n                });\n            } else {\n                var i = 0;\n                yourCard.forEach(function (card) {\n                    if (card.suit === suit) {\n                        card.display.setSelectable(true);\n                        i++;\n                    } else card.display.grayScale(true);\n                });\n                if (i === 0) {\n                    yourCard.forEach(function (card) {\n                        card.display.setSelectable(true);\n                        card.display.grayScale(false);\n                        card.adjustPos();\n                    });\n                }\n            }\n        } else players[loc].display.setTurn(true);\n    }\n};\nvar playerPickCard = function playerPickCard(mess) {\n    var playerLoc = _config2.default.getLocOfPlayers({ location: mess.location });\n\n    var player = _game2.default.run.getPlayers()[playerLoc];\n    var cards = player.row.cards;\n\n    var _cards$filter = cards.filter(function (c) {\n        return c.id === mess.card.id;\n    }),\n        _cards$filter2 = _slicedToArray(_cards$filter, 1),\n        card = _cards$filter2[0];\n\n    if (card) {\n        var x = _config2.default.getWasteCards();\n        x.push(cards);\n        _config2.default.setWasteCards(x);\n        _game2.default.run.moveCard.toTable(playerLoc, card);\n    }\n};\nvar toWaste = function toWaste(mess) {\n    _game2.default.run.toWast();\n    _game2.default.run.setStatus(\"endRound\", true);\n    _game2.default.run.setStatus(\"newRound\", true);\n};\nvar game_alert = function game_alert(mess) {\n    _loadingPage2.default.load(false);\n    _ui2.default.showMessage(mess);\n};\n\nfunction deskMove(x) {\n    x ? desk.removeClass(\"hide\").addClass(\"show\") : desk.removeClass(\"show\").addClass(\"hide\");\n}\n\nvar teamScore = function teamScore(mess) {\n    function getOurTeam(loc) {\n        if (loc === 2 || loc === 0) return { our: \"topB\", their: \"rightL\" };else if (loc === 3 || loc === 1) return { our: \"rightL\", their: \"topB\" };\n    }\n\n    function roundPrint(our, their) {\n        $(\"#score-rounds\").html(\"حریف \" + their + \" | \" + our + \" ما \");\n    }\n\n    function gamePrint(our, their) {\n        $(\"#score-games\").html(\"حریف \" + their + \" | \" + our + \" ما \");\n    }\n\n    var location = _config2.default.getLocation();\n    var teamLoc = getOurTeam(location);\n    var round = mess.round;\n    var game = mess.game;\n    roundPrint(round[teamLoc.our], round[teamLoc.their]);\n    gamePrint(game[teamLoc.our], game[teamLoc.their]);\n    deskMove(true);\n    setTimeout(function () {\n        deskMove(false);\n    }, 3000);\n};\nvar gameEnd = function gameEnd(mess) {\n    gameEnd_frame.removeClass(\"hide\").addClass(\"show\");\n    deskMove(true);\n    if (mess.player) _ui2.default.showMessage(mess.player.name + '\\u0627\\u0632 \\u0628\\u0627\\u0632\\u06CC \\u062E\\u0627\\u0631\\u062C \\u0634\\u062F');\n    // setTimeout(() => {\n    //     ui.hideMessage()\n    // }, 2000);\n    window.socket.disconnect();\n};\nvar game_newPlayer = function game_newPlayer(mess) {\n    _ui2.default.showMoveMess(mess.name + ' \\u0648\\u0627\\u0631\\u062F \\u0628\\u0627\\u0632\\u06CC \\u0634\\u062F ');\n    setTimeout(function () {\n        _ui2.default.showMessage('\\u0622\\u0646\\u0644\\u0627\\u06CC\\u0646 \\u0647\\u0627: ' + mess.length);\n    }, 2000);\n};\nvar game_leftPlayer = function game_leftPlayer(mess) {\n    _ui2.default.showMoveMess(mess.name + ' \\u0627\\u0632 \\u0628\\u0627\\u0632\\u06CC \\u062E\\u0627\\u0631\\u062C \\u0634\\u062F ');\n    setTimeout(function () {\n        _ui2.default.showMessage('\\u0622\\u0646\\u0644\\u0627\\u06CC\\u0646 \\u0647\\u0627: ' + mess.length);\n    }, 2000);\n};\nvar chat = function chat(mess) {\n    var playerLoc = _config2.default.getLocOfPlayers({ location: mess.location });\n    _game2.default.run.chatPlayer(playerLoc, mess.message);\n};\nvar player_disconnect = function player_disconnect(mess) {\n    var playerLoc = _config2.default.getLocOfPlayers({ location: mess.location });\n    _game2.default.run.chatPlayer(playerLoc, \"آفلاین شد\");\n    var player = _game2.default.run.returnPlayer(playerLoc);\n    player.display.offline(true);\n};\nvar player_connect = function player_connect(mess) {\n    var playerLoc = _config2.default.getLocOfPlayers({ location: mess.location });\n    _game2.default.run.chatPlayer(playerLoc, \"آنلاین شد\");\n    var player = _game2.default.run.returnPlayer(playerLoc);\n    player.display.offline(false);\n};\n\nvar routers = {\n    'game_start': game_start,\n    'setHakem': game_setHakem,\n    'newRound': game_newRound,\n    'setHokm': game_setHokm,\n    'hokmSeted': game_hokmSeted,\n    'setTurn': game_setTurn,\n    'playerPickCard': playerPickCard,\n    'toWaste': toWaste,\n    'alert': game_alert,\n    'teamScore': teamScore,\n    'gameEnd': gameEnd,\n    'newPlayer': game_newPlayer,\n    'leftPlayer': game_leftPlayer,\n    'chat': chat,\n    'player_disconnect': player_disconnect,\n    'player_connect': player_connect\n\n};\n;\n\n},{\"./config\":16,\"./game\":21,\"./loadingPage\":26,\"./main\":27,\"./ui\":31}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n   value: true\n});\n\nexports.default = function (cards, nc, game) {\n   if (window.socket.connected) {\n      var yourCard = game.run.getPlayers()[0].row.cards;\n      var hasSuit = false;\n      var currnetSuit = _config2.default.getSuit() * 1;\n      if (currnetSuit === 0 || currnetSuit === 1 || currnetSuit === 2 || currnetSuit === 3) {\n         var plyaer_i = game.run.getPlayers()[0];\n         var myCards = plyaer_i.row.cards;\n         myCards.forEach(function (e) {\n            if (e.suit === currnetSuit) hasSuit = true;\n         });\n      }\n\n      window.gameEmitor('pickCard', {\n         card: {\n            id: nc.id,\n            num: nc.num,\n            suit: nc.suit,\n            hasSuit: hasSuit\n         }\n      });\n\n      yourCard.forEach(function (card) {\n         card.display.setSelectable(false);\n         card.display.grayScale(false);\n      });\n      return true;\n   } else {\n      alert(\"disconnected from server\");\n      return false;\n   }\n};\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n\n},{\"./config\":16}],24:[function(require,module,exports){\n'use strict';\n\nvar _fixPageResponsive = require('./fixPageResponsive');\n\nvar _fixPageResponsive2 = _interopRequireDefault(_fixPageResponsive);\n\nvar _connectToServer = require('./connectToServer');\n\nvar _connectToServer2 = _interopRequireDefault(_connectToServer);\n\nvar _filesLoader = require('./filesLoader');\n\nvar _filesLoader2 = _interopRequireDefault(_filesLoader);\n\nvar _ui = require('./ui');\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_ui2.default.fragmentToDom($('#game-region')[0]);\n(0, _fixPageResponsive2.default)();\n(0, _filesLoader2.default)().then(function () {\n   console.log('load complete');\n   (0, _connectToServer2.default)();\n});\n\n},{\"./connectToServer\":17,\"./filesLoader\":19,\"./fixPageResponsive\":20,\"./ui\":31}],25:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    width: 500,\n    height: 500,\n    cardSep: 42,\n    cardHeight: 100,\n    cardWidth: 65,\n    rowMargin: 10,\n    boardHeight: 55,\n    boardWidth: 250,\n    region: null,\n    adjust: function adjust() {\n        if (!this.region) return;\n        this.width = this.region.offsetWidth;\n        this.height = this.region.offsetHeight;\n    }\n};\n\n},{}],26:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n//import $ from './jquery-2.0.3.min'\n\nvar errBox = void 0;\nvar methods = {};\nmethods.load = function (mode) {\n    if (mode) {\n        $('#loading_page').removeClass('hide').addClass('show');\n    } else {\n        $('#loading_page').removeClass('show').addClass('hide');\n    }\n};\nmethods.errBox = function (mess) {\n    errBox = $('#alert_msgbox');\n    var errBox_close_btn = $('#err_msg_close');\n    var errBox_text = $('#err_msg_text');\n    errBox_close_btn.click(function () {\n        methods.errBoxRemove();\n    });\n    errBox.removeClass('hide').addClass('show');\n    errBox_text.html(mess);\n};\nmethods.errBoxRemove = function () {\n    //  alert('close');\n    errBox = $('#alert_msgbox');\n    errBox.removeClass('show').addClass('hide');\n};\n\nexports.default = methods;\n\n},{}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n    //config.setNames(['a','b','c','d']);\n    _game2.default.load();\n    $(\".cornerButton\").removeClass(\"hide\").addClass(\"show\");\n\n    _layout2.default.region = $('#game-region')[0];\n    _layout2.default.adjust();\n\n    _domBinding2.default.fragmentToDom($('#game-region')[0]);\n    _game2.default.run.adjustLayout();\n\n    $(window).resize(function () {\n        _layout2.default.adjust();\n        _game2.default.run.adjustLayout();\n    });\n\n    // var nums = ['one', 'two', 'three', 'four'];\n    $('#control-region>button').on(\"click\", function () {\n        $('#control-region')[0].hidden = true;\n    });\n    $('#control-region>.newgame-but').on(\"click\", function () {\n        _config2.default.names.forEach(function (n, ind) {\n            _config2.default.levels[ind] = $('.player-diff.' + nums[ind] + ' input').val();\n            _config2.default.names[ind] = $('.player-set-name.' + nums[ind]).text();\n        });\n        _config2.default.sync();\n    });\n\n    $('#settings-but').on(\"click\", function () {\n        $('#settings-dialog')[0].hidden = false;\n        _config2.default.names.forEach(function (n, ind) {\n            $('.player-set-name.' + nums[ind])[0].innerHTML = n;\n            $('.player-diff.' + nums[ind] + ' input').val(parseInt(_config2.default.levels[ind]));\n            console.log(parseInt(_config2.default.levels[ind]));\n        });\n        $('#control-region')[0].hidden = false;\n    });\n\n    $(window).on('wheel', function (event) {\n        if (event.originalEvent.deltaY < 0) $(\"#team-score\").removeClass(\"show\").addClass(\"hide\");else $(\"#team-score\").removeClass(\"hide\").addClass(\"show\");\n    });\n    _game2.default.run.newGame(); //\n};\n\nvar _game = require('./game');\n\nvar _game2 = _interopRequireDefault(_game);\n\nvar _domBinding = require('./domBinding');\n\nvar _domBinding2 = _interopRequireDefault(_domBinding);\n\nvar _layout = require('./layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.game = _game2.default;\n//import $ from './jquery-2.0.3.min'\n\n},{\"./config\":16,\"./domBinding\":18,\"./game\":21,\"./layout\":25}],28:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar cardsInfo = [];\n\nfor (var i = 0; i < 52; i++) {\n    cardsInfo.push({\n        num: i % 13 + 1,\n        suit: i % 4\n    });\n}\n\nfunction infoToCardId(num, suit) {\n    var r = num - 1;\n    while (r % 4 !== suit) {\n        r += 13;\n    }\n    return r;\n}\n\nfunction removeFromUnorderedArray(arr, item) {\n    // console.trace();\n    if (!arr.length) return;\n    var ind = arr.indexOf(item);\n    if (ind === -1) return;\n    arr[ind] = arr[arr.length - 1];\n    arr.pop();\n}\n\nexports.default = {\n    cardsInfo: cardsInfo,\n    infoToCardId: infoToCardId,\n    removeFromUnorderedArray: removeFromUnorderedArray\n};\n\n},{}],29:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    getValidCards: function getValidCards(cards, firstSuit, isHeartBroken) {\n        if (firstSuit == -1) {\n            if (isHeartBroken) {\n                return cards;\n            } else if (cards.length === 13) {\n                for (var i = 0; i < cards.length; i++) {\n                    if (cards[i].suit == 2 && cards[i].num == 1) {\n                        return [cards[i]];\n                    }\n                }\n                return null;\n            } else {\n                var vcards = cards.filter(function (c) {\n                    return c.suit !== 1;\n                });\n                if (vcards.length === 0) {\n                    return vcards.concat(cards);\n                } else {\n                    return vcards;\n                }\n            }\n        } else {\n            var vcards = cards.filter(function (c) {\n                return c.suit === firstSuit;\n            });\n            if (vcards.length === 0) {\n                return vcards.concat(cards);\n            } else {\n                return vcards;\n            }\n        }\n    }\n};\n\n},{}],30:[function(require,module,exports){\n(function (Buffer){\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n!function (t, e) {\n    \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"object\" == (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) ? module.exports = e() : \"function\" == typeof define && define.amd ? define([], e) : \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) ? exports.io = e() : t.io = e();\n}(undefined, function () {\n    return function (t) {\n        function e(r) {\n            if (n[r]) return n[r].exports;\n            var o = n[r] = { exports: {}, id: r, loaded: !1 };\n            return t[r].call(o.exports, o, o.exports, e), o.loaded = !0, o.exports;\n        }\n\n        var n = {};\n        return e.m = t, e.c = n, e.p = \"\", e(0);\n    }([function (t, e, n) {\n        \"use strict\";\n\n        function r(t, e) {\n            \"object\" === (\"undefined\" == typeof t ? \"undefined\" : o(t)) && (e = t, t = void 0), e = e || {};\n            var n,\n                r = i(t),\n                s = r.source,\n                u = r.id,\n                h = r.path,\n                f = p[u] && h in p[u].nsps,\n                l = e.forceNew || e[\"force new connection\"] || !1 === e.multiplex || f;\n            return l ? (c(\"ignoring socket cache for %s\", s), n = a(s, e)) : (p[u] || (c(\"new io instance for %s\", s), p[u] = a(s, e)), n = p[u]), r.query && !e.query && (e.query = r.query), n.socket(r.path, e);\n        }\n\n        var o = \"function\" == typeof Symbol && \"symbol\" == _typeof(Symbol.iterator) ? function (t) {\n            return typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n        } : function (t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n        },\n            i = n(1),\n            s = n(7),\n            a = n(12),\n            c = n(3)(\"socket.io-client\");\n        t.exports = e = r;\n        var p = e.managers = {};\n        e.protocol = s.protocol, e.connect = r, e.Manager = n(12), e.Socket = n(36);\n    }, function (t, e, n) {\n        \"use strict\";\n\n        function r(t, e) {\n            var n = t;\n            e = e || \"undefined\" != typeof location && location, null == t && (t = e.protocol + \"//\" + e.host), \"string\" == typeof t && (\"/\" === t.charAt(0) && (t = \"/\" === t.charAt(1) ? e.protocol + t : e.host + t), /^(https?|wss?):\\/\\//.test(t) || (i(\"protocol-less url %s\", t), t = \"undefined\" != typeof e ? e.protocol + \"//\" + t : \"https://\" + t), i(\"parse %s\", t), n = o(t)), n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = \"80\" : /^(http|ws)s$/.test(n.protocol) && (n.port = \"443\")), n.path = n.path || \"/\";\n            var r = n.host.indexOf(\":\") !== -1,\n                s = r ? \"[\" + n.host + \"]\" : n.host;\n            return n.id = n.protocol + \"://\" + s + \":\" + n.port, n.href = n.protocol + \"://\" + s + (e && e.port === n.port ? \"\" : \":\" + n.port), n;\n        }\n\n        var o = n(2),\n            i = n(3)(\"socket.io-client:url\");\n        t.exports = r;\n    }, function (t, e) {\n        var n = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n            r = [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\", \"host\", \"port\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"];\n        t.exports = function (t) {\n            var e = t,\n                o = t.indexOf(\"[\"),\n                i = t.indexOf(\"]\");\n            o != -1 && i != -1 && (t = t.substring(0, o) + t.substring(o, i).replace(/:/g, \";\") + t.substring(i, t.length));\n            for (var s = n.exec(t || \"\"), a = {}, c = 14; c--;) {\n                a[r[c]] = s[c] || \"\";\n            }return o != -1 && i != -1 && (a.source = e, a.host = a.host.substring(1, a.host.length - 1).replace(/;/g, \":\"), a.authority = a.authority.replace(\"[\", \"\").replace(\"]\", \"\").replace(/;/g, \":\"), a.ipv6uri = !0), a;\n        };\n    }, function (t, e, n) {\n        (function (r) {\n            function o() {\n                return !(\"undefined\" == typeof window || !window.process || \"renderer\" !== window.process.type) || (\"undefined\" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) && (\"undefined\" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || \"undefined\" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || \"undefined\" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || \"undefined\" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n            }\n\n            function i(t) {\n                var n = this.useColors;\n                if (t[0] = (n ? \"%c\" : \"\") + this.namespace + (n ? \" %c\" : \" \") + t[0] + (n ? \"%c \" : \" \") + \"+\" + e.humanize(this.diff), n) {\n                    var r = \"color: \" + this.color;\n                    t.splice(1, 0, r, \"color: inherit\");\n                    var o = 0,\n                        i = 0;\n                    t[0].replace(/%[a-zA-Z%]/g, function (t) {\n                        \"%%\" !== t && (o++, \"%c\" === t && (i = o));\n                    }), t.splice(i, 0, r);\n                }\n            }\n\n            function s() {\n                return \"object\" == (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) && console.log && Function.prototype.apply.call(console.log, console, arguments);\n            }\n\n            function a(t) {\n                try {\n                    null == t ? e.storage.removeItem(\"debug\") : e.storage.debug = t;\n                } catch (n) {}\n            }\n\n            function c() {\n                var t;\n                try {\n                    t = e.storage.debug;\n                } catch (n) {}\n                return !t && \"undefined\" != typeof r && \"env\" in r && (t = r.env.DEBUG), t;\n            }\n\n            function p() {\n                try {\n                    return window.localStorage;\n                } catch (t) {}\n            }\n\n            e = t.exports = n(5), e.log = s, e.formatArgs = i, e.save = a, e.load = c, e.useColors = o, e.storage = \"undefined\" != typeof chrome && \"undefined\" != typeof chrome.storage ? chrome.storage.local : p(), e.colors = [\"#0000CC\", \"#0000FF\", \"#0033CC\", \"#0033FF\", \"#0066CC\", \"#0066FF\", \"#0099CC\", \"#0099FF\", \"#00CC00\", \"#00CC33\", \"#00CC66\", \"#00CC99\", \"#00CCCC\", \"#00CCFF\", \"#3300CC\", \"#3300FF\", \"#3333CC\", \"#3333FF\", \"#3366CC\", \"#3366FF\", \"#3399CC\", \"#3399FF\", \"#33CC00\", \"#33CC33\", \"#33CC66\", \"#33CC99\", \"#33CCCC\", \"#33CCFF\", \"#6600CC\", \"#6600FF\", \"#6633CC\", \"#6633FF\", \"#66CC00\", \"#66CC33\", \"#9900CC\", \"#9900FF\", \"#9933CC\", \"#9933FF\", \"#99CC00\", \"#99CC33\", \"#CC0000\", \"#CC0033\", \"#CC0066\", \"#CC0099\", \"#CC00CC\", \"#CC00FF\", \"#CC3300\", \"#CC3333\", \"#CC3366\", \"#CC3399\", \"#CC33CC\", \"#CC33FF\", \"#CC6600\", \"#CC6633\", \"#CC9900\", \"#CC9933\", \"#CCCC00\", \"#CCCC33\", \"#FF0000\", \"#FF0033\", \"#FF0066\", \"#FF0099\", \"#FF00CC\", \"#FF00FF\", \"#FF3300\", \"#FF3333\", \"#FF3366\", \"#FF3399\", \"#FF33CC\", \"#FF33FF\", \"#FF6600\", \"#FF6633\", \"#FF9900\", \"#FF9933\", \"#FFCC00\", \"#FFCC33\"], e.formatters.j = function (t) {\n                try {\n                    return JSON.stringify(t);\n                } catch (e) {\n                    return \"[UnexpectedJSONParseError]: \" + e.message;\n                }\n            }, e.enable(c());\n        }).call(e, n(4));\n    }, function (t, e) {\n        function n() {\n            throw new Error(\"setTimeout has not been defined\");\n        }\n\n        function r() {\n            throw new Error(\"clearTimeout has not been defined\");\n        }\n\n        function o(t) {\n            if (u === setTimeout) return setTimeout(t, 0);\n            if ((u === n || !u) && setTimeout) return u = setTimeout, setTimeout(t, 0);\n            try {\n                return u(t, 0);\n            } catch (e) {\n                try {\n                    return u.call(null, t, 0);\n                } catch (e) {\n                    return u.call(this, t, 0);\n                }\n            }\n        }\n\n        function i(t) {\n            if (h === clearTimeout) return clearTimeout(t);\n            if ((h === r || !h) && clearTimeout) return h = clearTimeout, clearTimeout(t);\n            try {\n                return h(t);\n            } catch (e) {\n                try {\n                    return h.call(null, t);\n                } catch (e) {\n                    return h.call(this, t);\n                }\n            }\n        }\n\n        function s() {\n            y && l && (y = !1, l.length ? d = l.concat(d) : m = -1, d.length && a());\n        }\n\n        function a() {\n            if (!y) {\n                var t = o(s);\n                y = !0;\n                for (var e = d.length; e;) {\n                    for (l = d, d = []; ++m < e;) {\n                        l && l[m].run();\n                    }m = -1, e = d.length;\n                }\n                l = null, y = !1, i(t);\n            }\n        }\n\n        function c(t, e) {\n            this.fun = t, this.array = e;\n        }\n\n        function p() {}\n\n        var u,\n            h,\n            f = t.exports = {};\n        !function () {\n            try {\n                u = \"function\" == typeof setTimeout ? setTimeout : n;\n            } catch (t) {\n                u = n;\n            }\n            try {\n                h = \"function\" == typeof clearTimeout ? clearTimeout : r;\n            } catch (t) {\n                h = r;\n            }\n        }();\n        var l,\n            d = [],\n            y = !1,\n            m = -1;\n        f.nextTick = function (t) {\n            var e = new Array(arguments.length - 1);\n            if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) {\n                e[n - 1] = arguments[n];\n            }d.push(new c(t, e)), 1 !== d.length || y || o(a);\n        }, c.prototype.run = function () {\n            this.fun.apply(null, this.array);\n        }, f.title = \"browser\", f.browser = !0, f.env = {}, f.argv = [], f.version = \"\", f.versions = {}, f.on = p, f.addListener = p, f.once = p, f.off = p, f.removeListener = p, f.removeAllListeners = p, f.emit = p, f.prependListener = p, f.prependOnceListener = p, f.listeners = function (t) {\n            return [];\n        }, f.binding = function (t) {\n            throw new Error(\"process.binding is not supported\");\n        }, f.cwd = function () {\n            return \"/\";\n        }, f.chdir = function (t) {\n            throw new Error(\"process.chdir is not supported\");\n        }, f.umask = function () {\n            return 0;\n        };\n    }, function (t, e, n) {\n        function r(t) {\n            var n,\n                r = 0;\n            for (n in t) {\n                r = (r << 5) - r + t.charCodeAt(n), r |= 0;\n            }return e.colors[Math.abs(r) % e.colors.length];\n        }\n\n        function o(t) {\n            function n() {\n                if (n.enabled) {\n                    var t = n,\n                        r = +new Date(),\n                        i = r - (o || r);\n                    t.diff = i, t.prev = o, t.curr = r, o = r;\n                    for (var s = new Array(arguments.length), a = 0; a < s.length; a++) {\n                        s[a] = arguments[a];\n                    }s[0] = e.coerce(s[0]), \"string\" != typeof s[0] && s.unshift(\"%O\");\n                    var c = 0;\n                    s[0] = s[0].replace(/%([a-zA-Z%])/g, function (n, r) {\n                        if (\"%%\" === n) return n;\n                        c++;\n                        var o = e.formatters[r];\n                        if (\"function\" == typeof o) {\n                            var i = s[c];\n                            n = o.call(t, i), s.splice(c, 1), c--;\n                        }\n                        return n;\n                    }), e.formatArgs.call(t, s);\n                    var p = n.log || e.log || console.log.bind(console);\n                    p.apply(t, s);\n                }\n            }\n\n            var o;\n            return n.namespace = t, n.enabled = e.enabled(t), n.useColors = e.useColors(), n.color = r(t), n.destroy = i, \"function\" == typeof e.init && e.init(n), e.instances.push(n), n;\n        }\n\n        function i() {\n            var t = e.instances.indexOf(this);\n            return t !== -1 && (e.instances.splice(t, 1), !0);\n        }\n\n        function s(t) {\n            e.save(t), e.names = [], e.skips = [];\n            var n,\n                r = (\"string\" == typeof t ? t : \"\").split(/[\\s,]+/),\n                o = r.length;\n            for (n = 0; n < o; n++) {\n                r[n] && (t = r[n].replace(/\\*/g, \".*?\"), \"-\" === t[0] ? e.skips.push(new RegExp(\"^\" + t.substr(1) + \"$\")) : e.names.push(new RegExp(\"^\" + t + \"$\")));\n            }for (n = 0; n < e.instances.length; n++) {\n                var i = e.instances[n];\n                i.enabled = e.enabled(i.namespace);\n            }\n        }\n\n        function a() {\n            e.enable(\"\");\n        }\n\n        function c(t) {\n            if (\"*\" === t[t.length - 1]) return !0;\n            var n, r;\n            for (n = 0, r = e.skips.length; n < r; n++) {\n                if (e.skips[n].test(t)) return !1;\n            }for (n = 0, r = e.names.length; n < r; n++) {\n                if (e.names[n].test(t)) return !0;\n            }return !1;\n        }\n\n        function p(t) {\n            return t instanceof Error ? t.stack || t.message : t;\n        }\n\n        e = t.exports = o.debug = o[\"default\"] = o, e.coerce = p, e.disable = a, e.enable = s, e.enabled = c, e.humanize = n(6), e.instances = [], e.names = [], e.skips = [], e.formatters = {};\n    }, function (t, e) {\n        function n(t) {\n            if (t = String(t), !(t.length > 100)) {\n                var e = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);\n                if (e) {\n                    var n = parseFloat(e[1]),\n                        r = (e[2] || \"ms\").toLowerCase();\n                    switch (r) {\n                        case \"years\":\n                        case \"year\":\n                        case \"yrs\":\n                        case \"yr\":\n                        case \"y\":\n                            return n * u;\n                        case \"days\":\n                        case \"day\":\n                        case \"d\":\n                            return n * p;\n                        case \"hours\":\n                        case \"hour\":\n                        case \"hrs\":\n                        case \"hr\":\n                        case \"h\":\n                            return n * c;\n                        case \"minutes\":\n                        case \"minute\":\n                        case \"mins\":\n                        case \"min\":\n                        case \"m\":\n                            return n * a;\n                        case \"seconds\":\n                        case \"second\":\n                        case \"secs\":\n                        case \"sec\":\n                        case \"s\":\n                            return n * s;\n                        case \"milliseconds\":\n                        case \"millisecond\":\n                        case \"msecs\":\n                        case \"msec\":\n                        case \"ms\":\n                            return n;\n                        default:\n                            return;\n                    }\n                }\n            }\n        }\n\n        function r(t) {\n            return t >= p ? Math.round(t / p) + \"d\" : t >= c ? Math.round(t / c) + \"h\" : t >= a ? Math.round(t / a) + \"m\" : t >= s ? Math.round(t / s) + \"s\" : t + \"ms\";\n        }\n\n        function o(t) {\n            return i(t, p, \"day\") || i(t, c, \"hour\") || i(t, a, \"minute\") || i(t, s, \"second\") || t + \" ms\";\n        }\n\n        function i(t, e, n) {\n            if (!(t < e)) return t < 1.5 * e ? Math.floor(t / e) + \" \" + n : Math.ceil(t / e) + \" \" + n + \"s\";\n        }\n\n        var s = 1e3,\n            a = 60 * s,\n            c = 60 * a,\n            p = 24 * c,\n            u = 365.25 * p;\n        t.exports = function (t, e) {\n            e = e || {};\n            var i = typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n            if (\"string\" === i && t.length > 0) return n(t);\n            if (\"number\" === i && isNaN(t) === !1) return e[\"long\"] ? o(t) : r(t);\n            throw new Error(\"val is not a non-empty string or a valid number. val=\" + JSON.stringify(t));\n        };\n    }, function (t, e, n) {\n        function r() {}\n\n        function o(t) {\n            var n = \"\" + t.type;\n            if (e.BINARY_EVENT !== t.type && e.BINARY_ACK !== t.type || (n += t.attachments + \"-\"), t.nsp && \"/\" !== t.nsp && (n += t.nsp + \",\"), null != t.id && (n += t.id), null != t.data) {\n                var r = i(t.data);\n                if (r === !1) return g;\n                n += r;\n            }\n            return f(\"encoded %j as %s\", t, n), n;\n        }\n\n        function i(t) {\n            try {\n                return JSON.stringify(t);\n            } catch (e) {\n                return !1;\n            }\n        }\n\n        function s(t, e) {\n            function n(t) {\n                var n = d.deconstructPacket(t),\n                    r = o(n.packet),\n                    i = n.buffers;\n                i.unshift(r), e(i);\n            }\n\n            d.removeBlobs(t, n);\n        }\n\n        function a() {\n            this.reconstructor = null;\n        }\n\n        function c(t) {\n            var n = 0,\n                r = { type: Number(t.charAt(0)) };\n            if (null == e.types[r.type]) return h(\"unknown packet type \" + r.type);\n            if (e.BINARY_EVENT === r.type || e.BINARY_ACK === r.type) {\n                for (var o = \"\"; \"-\" !== t.charAt(++n) && (o += t.charAt(n), n != t.length);) {}\n                if (o != Number(o) || \"-\" !== t.charAt(n)) throw new Error(\"Illegal attachments\");\n                r.attachments = Number(o);\n            }\n            if (\"/\" === t.charAt(n + 1)) for (r.nsp = \"\"; ++n;) {\n                var i = t.charAt(n);\n                if (\",\" === i) break;\n                if (r.nsp += i, n === t.length) break;\n            } else r.nsp = \"/\";\n            var s = t.charAt(n + 1);\n            if (\"\" !== s && Number(s) == s) {\n                for (r.id = \"\"; ++n;) {\n                    var i = t.charAt(n);\n                    if (null == i || Number(i) != i) {\n                        --n;\n                        break;\n                    }\n                    if (r.id += t.charAt(n), n === t.length) break;\n                }\n                r.id = Number(r.id);\n            }\n            if (t.charAt(++n)) {\n                var a = p(t.substr(n)),\n                    c = a !== !1 && (r.type === e.ERROR || y(a));\n                if (!c) return h(\"invalid payload\");\n                r.data = a;\n            }\n            return f(\"decoded %s as %j\", t, r), r;\n        }\n\n        function p(t) {\n            try {\n                return JSON.parse(t);\n            } catch (e) {\n                return !1;\n            }\n        }\n\n        function u(t) {\n            this.reconPack = t, this.buffers = [];\n        }\n\n        function h(t) {\n            return { type: e.ERROR, data: \"parser error: \" + t };\n        }\n\n        var f = n(3)(\"socket.io-parser\"),\n            l = n(8),\n            d = n(9),\n            y = n(10),\n            m = n(11);\n        e.protocol = 4, e.types = [\"CONNECT\", \"DISCONNECT\", \"EVENT\", \"ACK\", \"ERROR\", \"BINARY_EVENT\", \"BINARY_ACK\"], e.CONNECT = 0, e.DISCONNECT = 1, e.EVENT = 2, e.ACK = 3, e.ERROR = 4, e.BINARY_EVENT = 5, e.BINARY_ACK = 6, e.Encoder = r, e.Decoder = a;\n        var g = e.ERROR + '\"encode error\"';\n        r.prototype.encode = function (t, n) {\n            if (f(\"encoding packet %j\", t), e.BINARY_EVENT === t.type || e.BINARY_ACK === t.type) s(t, n);else {\n                var r = o(t);\n                n([r]);\n            }\n        }, l(a.prototype), a.prototype.add = function (t) {\n            var n;\n            if (\"string\" == typeof t) n = c(t), e.BINARY_EVENT === n.type || e.BINARY_ACK === n.type ? (this.reconstructor = new u(n), 0 === this.reconstructor.reconPack.attachments && this.emit(\"decoded\", n)) : this.emit(\"decoded\", n);else {\n                if (!m(t) && !t.base64) throw new Error(\"Unknown type: \" + t);\n                if (!this.reconstructor) throw new Error(\"got binary data when not reconstructing a packet\");\n                n = this.reconstructor.takeBinaryData(t), n && (this.reconstructor = null, this.emit(\"decoded\", n));\n            }\n        }, a.prototype.destroy = function () {\n            this.reconstructor && this.reconstructor.finishedReconstruction();\n        }, u.prototype.takeBinaryData = function (t) {\n            if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {\n                var e = d.reconstructPacket(this.reconPack, this.buffers);\n                return this.finishedReconstruction(), e;\n            }\n            return null;\n        }, u.prototype.finishedReconstruction = function () {\n            this.reconPack = null, this.buffers = [];\n        };\n    }, function (t, e, n) {\n        function r(t) {\n            if (t) return o(t);\n        }\n\n        function o(t) {\n            for (var e in r.prototype) {\n                t[e] = r.prototype[e];\n            }return t;\n        }\n\n        t.exports = r, r.prototype.on = r.prototype.addEventListener = function (t, e) {\n            return this._callbacks = this._callbacks || {}, (this._callbacks[\"$\" + t] = this._callbacks[\"$\" + t] || []).push(e), this;\n        }, r.prototype.once = function (t, e) {\n            function n() {\n                this.off(t, n), e.apply(this, arguments);\n            }\n\n            return n.fn = e, this.on(t, n), this;\n        }, r.prototype.off = r.prototype.removeListener = r.prototype.removeAllListeners = r.prototype.removeEventListener = function (t, e) {\n            if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this;\n            var n = this._callbacks[\"$\" + t];\n            if (!n) return this;\n            if (1 == arguments.length) return delete this._callbacks[\"$\" + t], this;\n            for (var r, o = 0; o < n.length; o++) {\n                if (r = n[o], r === e || r.fn === e) {\n                    n.splice(o, 1);\n                    break;\n                }\n            }return this;\n        }, r.prototype.emit = function (t) {\n            this._callbacks = this._callbacks || {};\n            var e = [].slice.call(arguments, 1),\n                n = this._callbacks[\"$\" + t];\n            if (n) {\n                n = n.slice(0);\n                for (var r = 0, o = n.length; r < o; ++r) {\n                    n[r].apply(this, e);\n                }\n            }\n            return this;\n        }, r.prototype.listeners = function (t) {\n            return this._callbacks = this._callbacks || {}, this._callbacks[\"$\" + t] || [];\n        }, r.prototype.hasListeners = function (t) {\n            return !!this.listeners(t).length;\n        };\n    }, function (t, e, n) {\n        function r(t, e) {\n            if (!t) return t;\n            if (s(t)) {\n                var n = { _placeholder: !0, num: e.length };\n                return e.push(t), n;\n            }\n            if (i(t)) {\n                for (var o = new Array(t.length), a = 0; a < t.length; a++) {\n                    o[a] = r(t[a], e);\n                }return o;\n            }\n            if (\"object\" == (typeof t === \"undefined\" ? \"undefined\" : _typeof(t)) && !(t instanceof Date)) {\n                var o = {};\n                for (var c in t) {\n                    o[c] = r(t[c], e);\n                }return o;\n            }\n            return t;\n        }\n\n        function o(t, e) {\n            if (!t) return t;\n            if (t && t._placeholder) return e[t.num];\n            if (i(t)) for (var n = 0; n < t.length; n++) {\n                t[n] = o(t[n], e);\n            } else if (\"object\" == (typeof t === \"undefined\" ? \"undefined\" : _typeof(t))) for (var r in t) {\n                t[r] = o(t[r], e);\n            }return t;\n        }\n\n        var i = n(10),\n            s = n(11),\n            a = Object.prototype.toString,\n            c = \"function\" == typeof Blob || \"undefined\" != typeof Blob && \"[object BlobConstructor]\" === a.call(Blob),\n            p = \"function\" == typeof File || \"undefined\" != typeof File && \"[object FileConstructor]\" === a.call(File);\n        e.deconstructPacket = function (t) {\n            var e = [],\n                n = t.data,\n                o = t;\n            return o.data = r(n, e), o.attachments = e.length, { packet: o, buffers: e };\n        }, e.reconstructPacket = function (t, e) {\n            return t.data = o(t.data, e), t.attachments = void 0, t;\n        }, e.removeBlobs = function (t, e) {\n            function n(t, a, u) {\n                if (!t) return t;\n                if (c && t instanceof Blob || p && t instanceof File) {\n                    r++;\n                    var h = new FileReader();\n                    h.onload = function () {\n                        u ? u[a] = this.result : o = this.result, --r || e(o);\n                    }, h.readAsArrayBuffer(t);\n                } else if (i(t)) for (var f = 0; f < t.length; f++) {\n                    n(t[f], f, t);\n                } else if (\"object\" == (typeof t === \"undefined\" ? \"undefined\" : _typeof(t)) && !s(t)) for (var l in t) {\n                    n(t[l], l, t);\n                }\n            }\n\n            var r = 0,\n                o = t;\n            n(o), r || e(o);\n        };\n    }, function (t, e) {\n        var n = {}.toString;\n        t.exports = Array.isArray || function (t) {\n            return \"[object Array]\" == n.call(t);\n        };\n    }, function (t, e) {\n        function n(t) {\n            return r && Buffer.isBuffer(t) || o && (t instanceof ArrayBuffer || i(t));\n        }\n\n        t.exports = n;\n        var r = \"function\" == typeof Buffer && \"function\" == typeof Buffer.isBuffer,\n            o = \"function\" == typeof ArrayBuffer,\n            i = function i(t) {\n            return \"function\" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(t) : t.buffer instanceof ArrayBuffer;\n        };\n    }, function (t, e, n) {\n        \"use strict\";\n\n        function r(t, e) {\n            if (!(this instanceof r)) return new r(t, e);\n            t && \"object\" === (\"undefined\" == typeof t ? \"undefined\" : o(t)) && (e = t, t = void 0), e = e || {}, e.path = e.path || \"/socket.io\", this.nsps = {}, this.subs = [], this.opts = e, this.reconnection(e.reconnection !== !1), this.reconnectionAttempts(e.reconnectionAttempts || 1 / 0), this.reconnectionDelay(e.reconnectionDelay || 1e3), this.reconnectionDelayMax(e.reconnectionDelayMax || 5e3), this.randomizationFactor(e.randomizationFactor || .5), this.backoff = new l({\n                min: this.reconnectionDelay(),\n                max: this.reconnectionDelayMax(),\n                jitter: this.randomizationFactor()\n            }), this.timeout(null == e.timeout ? 2e4 : e.timeout), this.readyState = \"closed\", this.uri = t, this.connecting = [], this.lastPing = null, this.encoding = !1, this.packetBuffer = [];\n            var n = e.parser || c;\n            this.encoder = new n.Encoder(), this.decoder = new n.Decoder(), this.autoConnect = e.autoConnect !== !1, this.autoConnect && this.open();\n        }\n\n        var o = \"function\" == typeof Symbol && \"symbol\" == _typeof(Symbol.iterator) ? function (t) {\n            return typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n        } : function (t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n        },\n            i = n(13),\n            s = n(36),\n            a = n(8),\n            c = n(7),\n            p = n(38),\n            u = n(39),\n            h = n(3)(\"socket.io-client:manager\"),\n            f = n(35),\n            l = n(40),\n            d = Object.prototype.hasOwnProperty;\n        t.exports = r, r.prototype.emitAll = function () {\n            this.emit.apply(this, arguments);\n            for (var t in this.nsps) {\n                d.call(this.nsps, t) && this.nsps[t].emit.apply(this.nsps[t], arguments);\n            }\n        }, r.prototype.updateSocketIds = function () {\n            for (var t in this.nsps) {\n                d.call(this.nsps, t) && (this.nsps[t].id = this.generateId(t));\n            }\n        }, r.prototype.generateId = function (t) {\n            return (\"/\" === t ? \"\" : t + \"#\") + this.engine.id;\n        }, a(r.prototype), r.prototype.reconnection = function (t) {\n            return arguments.length ? (this._reconnection = !!t, this) : this._reconnection;\n        }, r.prototype.reconnectionAttempts = function (t) {\n            return arguments.length ? (this._reconnectionAttempts = t, this) : this._reconnectionAttempts;\n        }, r.prototype.reconnectionDelay = function (t) {\n            return arguments.length ? (this._reconnectionDelay = t, this.backoff && this.backoff.setMin(t), this) : this._reconnectionDelay;\n        }, r.prototype.randomizationFactor = function (t) {\n            return arguments.length ? (this._randomizationFactor = t, this.backoff && this.backoff.setJitter(t), this) : this._randomizationFactor;\n        }, r.prototype.reconnectionDelayMax = function (t) {\n            return arguments.length ? (this._reconnectionDelayMax = t, this.backoff && this.backoff.setMax(t), this) : this._reconnectionDelayMax;\n        }, r.prototype.timeout = function (t) {\n            return arguments.length ? (this._timeout = t, this) : this._timeout;\n        }, r.prototype.maybeReconnectOnOpen = function () {\n            !this.reconnecting && this._reconnection && 0 === this.backoff.attempts && this.reconnect();\n        }, r.prototype.open = r.prototype.connect = function (t, e) {\n            if (h(\"readyState %s\", this.readyState), ~this.readyState.indexOf(\"open\")) return this;\n            h(\"opening %s\", this.uri), this.engine = i(this.uri, this.opts);\n            var n = this.engine,\n                r = this;\n            this.readyState = \"opening\", this.skipReconnect = !1;\n            var o = p(n, \"open\", function () {\n                r.onopen(), t && t();\n            }),\n                s = p(n, \"error\", function (e) {\n                if (h(\"connect_error\"), r.cleanup(), r.readyState = \"closed\", r.emitAll(\"connect_error\", e), t) {\n                    var n = new Error(\"Connection error\");\n                    n.data = e, t(n);\n                } else r.maybeReconnectOnOpen();\n            });\n            if (!1 !== this._timeout) {\n                var a = this._timeout;\n                h(\"connect attempt will timeout after %d\", a);\n                var c = setTimeout(function () {\n                    h(\"connect attempt timed out after %d\", a), o.destroy(), n.close(), n.emit(\"error\", \"timeout\"), r.emitAll(\"connect_timeout\", a);\n                }, a);\n                this.subs.push({\n                    destroy: function destroy() {\n                        clearTimeout(c);\n                    }\n                });\n            }\n            return this.subs.push(o), this.subs.push(s), this;\n        }, r.prototype.onopen = function () {\n            h(\"open\"), this.cleanup(), this.readyState = \"open\", this.emit(\"open\");\n            var t = this.engine;\n            this.subs.push(p(t, \"data\", u(this, \"ondata\"))), this.subs.push(p(t, \"ping\", u(this, \"onping\"))), this.subs.push(p(t, \"pong\", u(this, \"onpong\"))), this.subs.push(p(t, \"error\", u(this, \"onerror\"))), this.subs.push(p(t, \"close\", u(this, \"onclose\"))), this.subs.push(p(this.decoder, \"decoded\", u(this, \"ondecoded\")));\n        }, r.prototype.onping = function () {\n            this.lastPing = new Date(), this.emitAll(\"ping\");\n        }, r.prototype.onpong = function () {\n            this.emitAll(\"pong\", new Date() - this.lastPing);\n        }, r.prototype.ondata = function (t) {\n            this.decoder.add(t);\n        }, r.prototype.ondecoded = function (t) {\n            this.emit(\"packet\", t);\n        }, r.prototype.onerror = function (t) {\n            h(\"error\", t), this.emitAll(\"error\", t);\n        }, r.prototype.socket = function (t, e) {\n            function n() {\n                ~f(o.connecting, r) || o.connecting.push(r);\n            }\n\n            var r = this.nsps[t];\n            if (!r) {\n                r = new s(this, t, e), this.nsps[t] = r;\n                var o = this;\n                r.on(\"connecting\", n), r.on(\"connect\", function () {\n                    r.id = o.generateId(t);\n                }), this.autoConnect && n();\n            }\n            return r;\n        }, r.prototype.destroy = function (t) {\n            var e = f(this.connecting, t);\n            ~e && this.connecting.splice(e, 1), this.connecting.length || this.close();\n        }, r.prototype.packet = function (t) {\n            h(\"writing packet %j\", t);\n            var e = this;\n            t.query && 0 === t.type && (t.nsp += \"?\" + t.query), e.encoding ? e.packetBuffer.push(t) : (e.encoding = !0, this.encoder.encode(t, function (n) {\n                for (var r = 0; r < n.length; r++) {\n                    e.engine.write(n[r], t.options);\n                }e.encoding = !1, e.processPacketQueue();\n            }));\n        }, r.prototype.processPacketQueue = function () {\n            if (this.packetBuffer.length > 0 && !this.encoding) {\n                var t = this.packetBuffer.shift();\n                this.packet(t);\n            }\n        }, r.prototype.cleanup = function () {\n            h(\"cleanup\");\n            for (var t = this.subs.length, e = 0; e < t; e++) {\n                var n = this.subs.shift();\n                n.destroy();\n            }\n            this.packetBuffer = [], this.encoding = !1, this.lastPing = null, this.decoder.destroy();\n        }, r.prototype.close = r.prototype.disconnect = function () {\n            h(\"disconnect\"), this.skipReconnect = !0, this.reconnecting = !1, \"opening\" === this.readyState && this.cleanup(), this.backoff.reset(), this.readyState = \"closed\", this.engine && this.engine.close();\n        }, r.prototype.onclose = function (t) {\n            h(\"onclose\"), this.cleanup(), this.backoff.reset(), this.readyState = \"closed\", this.emit(\"close\", t), this._reconnection && !this.skipReconnect && this.reconnect();\n        }, r.prototype.reconnect = function () {\n            if (this.reconnecting || this.skipReconnect) return this;\n            var t = this;\n            if (this.backoff.attempts >= this._reconnectionAttempts) h(\"reconnect failed\"), this.backoff.reset(), this.emitAll(\"reconnect_failed\"), this.reconnecting = !1;else {\n                var e = this.backoff.duration();\n                h(\"will wait %dms before reconnect attempt\", e), this.reconnecting = !0;\n                var n = setTimeout(function () {\n                    t.skipReconnect || (h(\"attempting reconnect\"), t.emitAll(\"reconnect_attempt\", t.backoff.attempts), t.emitAll(\"reconnecting\", t.backoff.attempts), t.skipReconnect || t.open(function (e) {\n                        e ? (h(\"reconnect attempt error\"), t.reconnecting = !1, t.reconnect(), t.emitAll(\"reconnect_error\", e.data)) : (h(\"reconnect success\"), t.onreconnect());\n                    }));\n                }, e);\n                this.subs.push({\n                    destroy: function destroy() {\n                        clearTimeout(n);\n                    }\n                });\n            }\n        }, r.prototype.onreconnect = function () {\n            var t = this.backoff.attempts;\n            this.reconnecting = !1, this.backoff.reset(), this.updateSocketIds(), this.emitAll(\"reconnect\", t);\n        };\n    }, function (t, e, n) {\n        t.exports = n(14), t.exports.parser = n(21);\n    }, function (t, e, n) {\n        function r(t, e) {\n            return this instanceof r ? (e = e || {}, t && \"object\" == (typeof t === \"undefined\" ? \"undefined\" : _typeof(t)) && (e = t, t = null), t ? (t = u(t), e.hostname = t.host, e.secure = \"https\" === t.protocol || \"wss\" === t.protocol, e.port = t.port, t.query && (e.query = t.query)) : e.host && (e.hostname = u(e.host).host), this.secure = null != e.secure ? e.secure : \"undefined\" != typeof location && \"https:\" === location.protocol, e.hostname && !e.port && (e.port = this.secure ? \"443\" : \"80\"), this.agent = e.agent || !1, this.hostname = e.hostname || (\"undefined\" != typeof location ? location.hostname : \"localhost\"), this.port = e.port || (\"undefined\" != typeof location && location.port ? location.port : this.secure ? 443 : 80), this.query = e.query || {}, \"string\" == typeof this.query && (this.query = h.decode(this.query)), this.upgrade = !1 !== e.upgrade, this.path = (e.path || \"/engine.io\").replace(/\\/$/, \"\") + \"/\", this.forceJSONP = !!e.forceJSONP, this.jsonp = !1 !== e.jsonp, this.forceBase64 = !!e.forceBase64, this.enablesXDR = !!e.enablesXDR, this.timestampParam = e.timestampParam || \"t\", this.timestampRequests = e.timestampRequests, this.transports = e.transports || [\"polling\", \"websocket\"], this.transportOptions = e.transportOptions || {}, this.readyState = \"\", this.writeBuffer = [], this.prevBufferLen = 0, this.policyPort = e.policyPort || 843, this.rememberUpgrade = e.rememberUpgrade || !1, this.binaryType = null, this.onlyBinaryUpgrades = e.onlyBinaryUpgrades, this.perMessageDeflate = !1 !== e.perMessageDeflate && (e.perMessageDeflate || {}), !0 === this.perMessageDeflate && (this.perMessageDeflate = {}), this.perMessageDeflate && null == this.perMessageDeflate.threshold && (this.perMessageDeflate.threshold = 1024), this.pfx = e.pfx || null, this.key = e.key || null, this.passphrase = e.passphrase || null, this.cert = e.cert || null, this.ca = e.ca || null, this.ciphers = e.ciphers || null, this.rejectUnauthorized = void 0 === e.rejectUnauthorized || e.rejectUnauthorized, this.forceNode = !!e.forceNode, this.isReactNative = \"undefined\" != typeof navigator && \"string\" == typeof navigator.product && \"reactnative\" === navigator.product.toLowerCase(), (\"undefined\" == typeof self || this.isReactNative) && (e.extraHeaders && Object.keys(e.extraHeaders).length > 0 && (this.extraHeaders = e.extraHeaders), e.localAddress && (this.localAddress = e.localAddress)), this.id = null, this.upgrades = null, this.pingInterval = null, this.pingTimeout = null, this.pingIntervalTimer = null, this.pingTimeoutTimer = null, void this.open()) : new r(t, e);\n        }\n\n        function o(t) {\n            var e = {};\n            for (var n in t) {\n                t.hasOwnProperty(n) && (e[n] = t[n]);\n            }return e;\n        }\n\n        var i = n(15),\n            s = n(8),\n            a = n(3)(\"engine.io-client:socket\"),\n            c = n(35),\n            p = n(21),\n            u = n(2),\n            h = n(29);\n        t.exports = r, r.priorWebsocketSuccess = !1, s(r.prototype), r.protocol = p.protocol, r.Socket = r, r.Transport = n(20), r.transports = n(15), r.parser = n(21), r.prototype.createTransport = function (t) {\n            a('creating transport \"%s\"', t);\n            var e = o(this.query);\n            e.EIO = p.protocol, e.transport = t;\n            var n = this.transportOptions[t] || {};\n            this.id && (e.sid = this.id);\n            var r = new i[t]({\n                query: e,\n                socket: this,\n                agent: n.agent || this.agent,\n                hostname: n.hostname || this.hostname,\n                port: n.port || this.port,\n                secure: n.secure || this.secure,\n                path: n.path || this.path,\n                forceJSONP: n.forceJSONP || this.forceJSONP,\n                jsonp: n.jsonp || this.jsonp,\n                forceBase64: n.forceBase64 || this.forceBase64,\n                enablesXDR: n.enablesXDR || this.enablesXDR,\n                timestampRequests: n.timestampRequests || this.timestampRequests,\n                timestampParam: n.timestampParam || this.timestampParam,\n                policyPort: n.policyPort || this.policyPort,\n                pfx: n.pfx || this.pfx,\n                key: n.key || this.key,\n                passphrase: n.passphrase || this.passphrase,\n                cert: n.cert || this.cert,\n                ca: n.ca || this.ca,\n                ciphers: n.ciphers || this.ciphers,\n                rejectUnauthorized: n.rejectUnauthorized || this.rejectUnauthorized,\n                perMessageDeflate: n.perMessageDeflate || this.perMessageDeflate,\n                extraHeaders: n.extraHeaders || this.extraHeaders,\n                forceNode: n.forceNode || this.forceNode,\n                localAddress: n.localAddress || this.localAddress,\n                requestTimeout: n.requestTimeout || this.requestTimeout,\n                protocols: n.protocols || void 0,\n                isReactNative: this.isReactNative\n            });\n            return r;\n        }, r.prototype.open = function () {\n            var t;\n            if (this.rememberUpgrade && r.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1) t = \"websocket\";else {\n                if (0 === this.transports.length) {\n                    var e = this;\n                    return void setTimeout(function () {\n                        e.emit(\"error\", \"No transports available\");\n                    }, 0);\n                }\n                t = this.transports[0];\n            }\n            this.readyState = \"opening\";\n            try {\n                t = this.createTransport(t);\n            } catch (n) {\n                return this.transports.shift(), void this.open();\n            }\n            t.open(), this.setTransport(t);\n        }, r.prototype.setTransport = function (t) {\n            a(\"setting transport %s\", t.name);\n            var e = this;\n            this.transport && (a(\"clearing existing transport %s\", this.transport.name), this.transport.removeAllListeners()), this.transport = t, t.on(\"drain\", function () {\n                e.onDrain();\n            }).on(\"packet\", function (t) {\n                e.onPacket(t);\n            }).on(\"error\", function (t) {\n                e.onError(t);\n            }).on(\"close\", function () {\n                e.onClose(\"transport close\");\n            });\n        }, r.prototype.probe = function (t) {\n            function e() {\n                if (f.onlyBinaryUpgrades) {\n                    var e = !this.supportsBinary && f.transport.supportsBinary;\n                    h = h || e;\n                }\n                h || (a('probe transport \"%s\" opened', t), u.send([{\n                    type: \"ping\",\n                    data: \"probe\"\n                }]), u.once(\"packet\", function (e) {\n                    if (!h) if (\"pong\" === e.type && \"probe\" === e.data) {\n                        if (a('probe transport \"%s\" pong', t), f.upgrading = !0, f.emit(\"upgrading\", u), !u) return;\n                        r.priorWebsocketSuccess = \"websocket\" === u.name, a('pausing current transport \"%s\"', f.transport.name), f.transport.pause(function () {\n                            h || \"closed\" !== f.readyState && (a(\"changing transport and sending upgrade packet\"), p(), f.setTransport(u), u.send([{ type: \"upgrade\" }]), f.emit(\"upgrade\", u), u = null, f.upgrading = !1, f.flush());\n                        });\n                    } else {\n                        a('probe transport \"%s\" failed', t);\n                        var n = new Error(\"probe error\");\n                        n.transport = u.name, f.emit(\"upgradeError\", n);\n                    }\n                }));\n            }\n\n            function n() {\n                h || (h = !0, p(), u.close(), u = null);\n            }\n\n            function o(e) {\n                var r = new Error(\"probe error: \" + e);\n                r.transport = u.name, n(), a('probe transport \"%s\" failed because of error: %s', t, e), f.emit(\"upgradeError\", r);\n            }\n\n            function i() {\n                o(\"transport closed\");\n            }\n\n            function s() {\n                o(\"socket closed\");\n            }\n\n            function c(t) {\n                u && t.name !== u.name && (a('\"%s\" works - aborting \"%s\"', t.name, u.name), n());\n            }\n\n            function p() {\n                u.removeListener(\"open\", e), u.removeListener(\"error\", o), u.removeListener(\"close\", i), f.removeListener(\"close\", s), f.removeListener(\"upgrading\", c);\n            }\n\n            a('probing transport \"%s\"', t);\n            var u = this.createTransport(t, { probe: 1 }),\n                h = !1,\n                f = this;\n            r.priorWebsocketSuccess = !1, u.once(\"open\", e), u.once(\"error\", o), u.once(\"close\", i), this.once(\"close\", s), this.once(\"upgrading\", c), u.open();\n        }, r.prototype.onOpen = function () {\n            if (a(\"socket open\"), this.readyState = \"open\", r.priorWebsocketSuccess = \"websocket\" === this.transport.name, this.emit(\"open\"), this.flush(), \"open\" === this.readyState && this.upgrade && this.transport.pause) {\n                a(\"starting upgrade probes\");\n                for (var t = 0, e = this.upgrades.length; t < e; t++) {\n                    this.probe(this.upgrades[t]);\n                }\n            }\n        }, r.prototype.onPacket = function (t) {\n            if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) switch (a('socket receive: type \"%s\", data \"%s\"', t.type, t.data), this.emit(\"packet\", t), this.emit(\"heartbeat\"), t.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(t.data));\n                    break;\n                case \"pong\":\n                    this.setPing(), this.emit(\"pong\");\n                    break;\n                case \"error\":\n                    var e = new Error(\"server error\");\n                    e.code = t.data, this.onError(e);\n                    break;\n                case \"message\":\n                    this.emit(\"data\", t.data), this.emit(\"message\", t.data);\n            } else a('packet received with socket readyState \"%s\"', this.readyState);\n        }, r.prototype.onHandshake = function (t) {\n            this.emit(\"handshake\", t), this.id = t.sid, this.transport.query.sid = t.sid, this.upgrades = this.filterUpgrades(t.upgrades), this.pingInterval = t.pingInterval, this.pingTimeout = t.pingTimeout, this.onOpen(), \"closed\" !== this.readyState && (this.setPing(), this.removeListener(\"heartbeat\", this.onHeartbeat), this.on(\"heartbeat\", this.onHeartbeat));\n        }, r.prototype.onHeartbeat = function (t) {\n            clearTimeout(this.pingTimeoutTimer);\n            var e = this;\n            e.pingTimeoutTimer = setTimeout(function () {\n                \"closed\" !== e.readyState && e.onClose(\"ping timeout\");\n            }, t || e.pingInterval + e.pingTimeout);\n        }, r.prototype.setPing = function () {\n            var t = this;\n            clearTimeout(t.pingIntervalTimer), t.pingIntervalTimer = setTimeout(function () {\n                a(\"writing ping packet - expecting pong within %sms\", t.pingTimeout), t.ping(), t.onHeartbeat(t.pingTimeout);\n            }, t.pingInterval);\n        }, r.prototype.ping = function () {\n            var t = this;\n            this.sendPacket(\"ping\", function () {\n                t.emit(\"ping\");\n            });\n        }, r.prototype.onDrain = function () {\n            this.writeBuffer.splice(0, this.prevBufferLen), this.prevBufferLen = 0, 0 === this.writeBuffer.length ? this.emit(\"drain\") : this.flush();\n        }, r.prototype.flush = function () {\n            \"closed\" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length && (a(\"flushing %d packets in socket\", this.writeBuffer.length), this.transport.send(this.writeBuffer), this.prevBufferLen = this.writeBuffer.length, this.emit(\"flush\"));\n        }, r.prototype.write = r.prototype.send = function (t, e, n) {\n            return this.sendPacket(\"message\", t, e, n), this;\n        }, r.prototype.sendPacket = function (t, e, n, r) {\n            if (\"function\" == typeof e && (r = e, e = void 0), \"function\" == typeof n && (r = n, n = null), \"closing\" !== this.readyState && \"closed\" !== this.readyState) {\n                n = n || {}, n.compress = !1 !== n.compress;\n                var o = { type: t, data: e, options: n };\n                this.emit(\"packetCreate\", o), this.writeBuffer.push(o), r && this.once(\"flush\", r), this.flush();\n            }\n        }, r.prototype.close = function () {\n            function t() {\n                r.onClose(\"forced close\"), a(\"socket closing - telling transport to close\"), r.transport.close();\n            }\n\n            function e() {\n                r.removeListener(\"upgrade\", e), r.removeListener(\"upgradeError\", e), t();\n            }\n\n            function n() {\n                r.once(\"upgrade\", e), r.once(\"upgradeError\", e);\n            }\n\n            if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n                this.readyState = \"closing\";\n                var r = this;\n                this.writeBuffer.length ? this.once(\"drain\", function () {\n                    this.upgrading ? n() : t();\n                }) : this.upgrading ? n() : t();\n            }\n            return this;\n        }, r.prototype.onError = function (t) {\n            a(\"socket error %j\", t), r.priorWebsocketSuccess = !1, this.emit(\"error\", t), this.onClose(\"transport error\", t);\n        }, r.prototype.onClose = function (t, e) {\n            if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n                a('socket close with reason: \"%s\"', t);\n                var n = this;\n                clearTimeout(this.pingIntervalTimer), clearTimeout(this.pingTimeoutTimer), this.transport.removeAllListeners(\"close\"), this.transport.close(), this.transport.removeAllListeners(), this.readyState = \"closed\", this.id = null, this.emit(\"close\", t, e), n.writeBuffer = [], n.prevBufferLen = 0;\n            }\n        }, r.prototype.filterUpgrades = function (t) {\n            for (var e = [], n = 0, r = t.length; n < r; n++) {\n                ~c(this.transports, t[n]) && e.push(t[n]);\n            }return e;\n        };\n    }, function (t, e, n) {\n        function r(t) {\n            var e,\n                n = !1,\n                r = !1,\n                a = !1 !== t.jsonp;\n            if (\"undefined\" != typeof location) {\n                var c = \"https:\" === location.protocol,\n                    p = location.port;\n                p || (p = c ? 443 : 80), n = t.hostname !== location.hostname || p !== t.port, r = t.secure !== c;\n            }\n            if (t.xdomain = n, t.xscheme = r, e = new o(t), \"open\" in e && !t.forceJSONP) return new i(t);\n            if (!a) throw new Error(\"JSONP disabled\");\n            return new s(t);\n        }\n\n        var o = n(16),\n            i = n(18),\n            s = n(32),\n            a = n(33);\n        e.polling = r, e.websocket = a;\n    }, function (t, e, n) {\n        var r = n(17);\n        t.exports = function (t) {\n            var e = t.xdomain,\n                n = t.xscheme,\n                o = t.enablesXDR;\n            try {\n                if (\"undefined\" != typeof XMLHttpRequest && (!e || r)) return new XMLHttpRequest();\n            } catch (i) {}\n            try {\n                if (\"undefined\" != typeof XDomainRequest && !n && o) return new XDomainRequest();\n            } catch (i) {}\n            if (!e) try {\n                return new self[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n            } catch (i) {}\n        };\n    }, function (t, e) {\n        try {\n            t.exports = \"undefined\" != typeof XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest();\n        } catch (n) {\n            t.exports = !1;\n        }\n    }, function (t, e, n) {\n        function r() {}\n\n        function o(t) {\n            if (c.call(this, t), this.requestTimeout = t.requestTimeout, this.extraHeaders = t.extraHeaders, \"undefined\" != typeof location) {\n                var e = \"https:\" === location.protocol,\n                    n = location.port;\n                n || (n = e ? 443 : 80), this.xd = \"undefined\" != typeof location && t.hostname !== location.hostname || n !== t.port, this.xs = t.secure !== e;\n            }\n        }\n\n        function i(t) {\n            this.method = t.method || \"GET\", this.uri = t.uri, this.xd = !!t.xd, this.xs = !!t.xs, this.async = !1 !== t.async, this.data = void 0 !== t.data ? t.data : null, this.agent = t.agent, this.isBinary = t.isBinary, this.supportsBinary = t.supportsBinary, this.enablesXDR = t.enablesXDR, this.requestTimeout = t.requestTimeout, this.pfx = t.pfx, this.key = t.key, this.passphrase = t.passphrase, this.cert = t.cert, this.ca = t.ca, this.ciphers = t.ciphers, this.rejectUnauthorized = t.rejectUnauthorized, this.extraHeaders = t.extraHeaders, this.create();\n        }\n\n        function s() {\n            for (var t in i.requests) {\n                i.requests.hasOwnProperty(t) && i.requests[t].abort();\n            }\n        }\n\n        var a = n(16),\n            c = n(19),\n            p = n(8),\n            u = n(30),\n            h = n(3)(\"engine.io-client:polling-xhr\");\n        if (t.exports = o, t.exports.Request = i, u(o, c), o.prototype.supportsBinary = !0, o.prototype.request = function (t) {\n            return t = t || {}, t.uri = this.uri(), t.xd = this.xd, t.xs = this.xs, t.agent = this.agent || !1, t.supportsBinary = this.supportsBinary, t.enablesXDR = this.enablesXDR, t.pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized, t.requestTimeout = this.requestTimeout, t.extraHeaders = this.extraHeaders, new i(t);\n        }, o.prototype.doWrite = function (t, e) {\n            var n = \"string\" != typeof t && void 0 !== t,\n                r = this.request({ method: \"POST\", data: t, isBinary: n }),\n                o = this;\n            r.on(\"success\", e), r.on(\"error\", function (t) {\n                o.onError(\"xhr post error\", t);\n            }), this.sendXhr = r;\n        }, o.prototype.doPoll = function () {\n            h(\"xhr poll\");\n            var t = this.request(),\n                e = this;\n            t.on(\"data\", function (t) {\n                e.onData(t);\n            }), t.on(\"error\", function (t) {\n                e.onError(\"xhr poll error\", t);\n            }), this.pollXhr = t;\n        }, p(i.prototype), i.prototype.create = function () {\n            var t = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n            t.pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized;\n            var e = this.xhr = new a(t),\n                n = this;\n            try {\n                h(\"xhr open %s: %s\", this.method, this.uri), e.open(this.method, this.uri, this.async);\n                try {\n                    if (this.extraHeaders) {\n                        e.setDisableHeaderCheck && e.setDisableHeaderCheck(!0);\n                        for (var r in this.extraHeaders) {\n                            this.extraHeaders.hasOwnProperty(r) && e.setRequestHeader(r, this.extraHeaders[r]);\n                        }\n                    }\n                } catch (o) {}\n                if (\"POST\" === this.method) try {\n                    this.isBinary ? e.setRequestHeader(\"Content-type\", \"application/octet-stream\") : e.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                } catch (o) {}\n                try {\n                    e.setRequestHeader(\"Accept\", \"*/*\");\n                } catch (o) {}\n                \"withCredentials\" in e && (e.withCredentials = !0), this.requestTimeout && (e.timeout = this.requestTimeout), this.hasXDR() ? (e.onload = function () {\n                    n.onLoad();\n                }, e.onerror = function () {\n                    n.onError(e.responseText);\n                }) : e.onreadystatechange = function () {\n                    if (2 === e.readyState) try {\n                        var t = e.getResponseHeader(\"Content-Type\");\n                        n.supportsBinary && \"application/octet-stream\" === t && (e.responseType = \"arraybuffer\");\n                    } catch (r) {}\n                    4 === e.readyState && (200 === e.status || 1223 === e.status ? n.onLoad() : setTimeout(function () {\n                        n.onError(e.status);\n                    }, 0));\n                }, h(\"xhr data %s\", this.data), e.send(this.data);\n            } catch (o) {\n                return void setTimeout(function () {\n                    n.onError(o);\n                }, 0);\n            }\n            \"undefined\" != typeof document && (this.index = i.requestsCount++, i.requests[this.index] = this);\n        }, i.prototype.onSuccess = function () {\n            this.emit(\"success\"), this.cleanup();\n        }, i.prototype.onData = function (t) {\n            this.emit(\"data\", t), this.onSuccess();\n        }, i.prototype.onError = function (t) {\n            this.emit(\"error\", t), this.cleanup(!0);\n        }, i.prototype.cleanup = function (t) {\n            if (\"undefined\" != typeof this.xhr && null !== this.xhr) {\n                if (this.hasXDR() ? this.xhr.onload = this.xhr.onerror = r : this.xhr.onreadystatechange = r, t) try {\n                    this.xhr.abort();\n                } catch (e) {}\n                \"undefined\" != typeof document && delete i.requests[this.index], this.xhr = null;\n            }\n        }, i.prototype.onLoad = function () {\n            var t;\n            try {\n                var e;\n                try {\n                    e = this.xhr.getResponseHeader(\"Content-Type\");\n                } catch (n) {}\n                t = \"application/octet-stream\" === e ? this.xhr.response || this.xhr.responseText : this.xhr.responseText;\n            } catch (n) {\n                this.onError(n);\n            }\n            null != t && this.onData(t);\n        }, i.prototype.hasXDR = function () {\n            return \"undefined\" != typeof XDomainRequest && !this.xs && this.enablesXDR;\n        }, i.prototype.abort = function () {\n            this.cleanup();\n        }, i.requestsCount = 0, i.requests = {}, \"undefined\" != typeof document) if (\"function\" == typeof attachEvent) attachEvent(\"onunload\", s);else if (\"function\" == typeof addEventListener) {\n            var f = \"onpagehide\" in self ? \"pagehide\" : \"unload\";\n            addEventListener(f, s, !1);\n        }\n    }, function (t, e, n) {\n        function r(t) {\n            var e = t && t.forceBase64;\n            u && !e || (this.supportsBinary = !1), o.call(this, t);\n        }\n\n        var o = n(20),\n            i = n(29),\n            s = n(21),\n            a = n(30),\n            c = n(31),\n            p = n(3)(\"engine.io-client:polling\");\n        t.exports = r;\n        var u = function () {\n            var t = n(16),\n                e = new t({ xdomain: !1 });\n            return null != e.responseType;\n        }();\n        a(r, o), r.prototype.name = \"polling\", r.prototype.doOpen = function () {\n            this.poll();\n        }, r.prototype.pause = function (t) {\n            function e() {\n                p(\"paused\"), n.readyState = \"paused\", t();\n            }\n\n            var n = this;\n            if (this.readyState = \"pausing\", this.polling || !this.writable) {\n                var r = 0;\n                this.polling && (p(\"we are currently polling - waiting to pause\"), r++, this.once(\"pollComplete\", function () {\n                    p(\"pre-pause polling complete\"), --r || e();\n                })), this.writable || (p(\"we are currently writing - waiting to pause\"), r++, this.once(\"drain\", function () {\n                    p(\"pre-pause writing complete\"), --r || e();\n                }));\n            } else e();\n        }, r.prototype.poll = function () {\n            p(\"polling\"), this.polling = !0, this.doPoll(), this.emit(\"poll\");\n        }, r.prototype.onData = function (t) {\n            var e = this;\n            p(\"polling got data %s\", t);\n            var n = function n(t, _n, r) {\n                return \"opening\" === e.readyState && e.onOpen(), \"close\" === t.type ? (e.onClose(), !1) : void e.onPacket(t);\n            };\n            s.decodePayload(t, this.socket.binaryType, n), \"closed\" !== this.readyState && (this.polling = !1, this.emit(\"pollComplete\"), \"open\" === this.readyState ? this.poll() : p('ignoring poll - transport state \"%s\"', this.readyState));\n        }, r.prototype.doClose = function () {\n            function t() {\n                p(\"writing close packet\"), e.write([{ type: \"close\" }]);\n            }\n\n            var e = this;\n            \"open\" === this.readyState ? (p(\"transport open - closing\"), t()) : (p(\"transport not open - deferring close\"), this.once(\"open\", t));\n        }, r.prototype.write = function (t) {\n            var e = this;\n            this.writable = !1;\n            var n = function n() {\n                e.writable = !0, e.emit(\"drain\");\n            };\n            s.encodePayload(t, this.supportsBinary, function (t) {\n                e.doWrite(t, n);\n            });\n        }, r.prototype.uri = function () {\n            var t = this.query || {},\n                e = this.secure ? \"https\" : \"http\",\n                n = \"\";\n            !1 !== this.timestampRequests && (t[this.timestampParam] = c()), this.supportsBinary || t.sid || (t.b64 = 1), t = i.encode(t), this.port && (\"https\" === e && 443 !== Number(this.port) || \"http\" === e && 80 !== Number(this.port)) && (n = \":\" + this.port), t.length && (t = \"?\" + t);\n            var r = this.hostname.indexOf(\":\") !== -1;\n            return e + \"://\" + (r ? \"[\" + this.hostname + \"]\" : this.hostname) + n + this.path + t;\n        };\n    }, function (t, e, n) {\n        function r(t) {\n            this.path = t.path, this.hostname = t.hostname, this.port = t.port, this.secure = t.secure, this.query = t.query, this.timestampParam = t.timestampParam, this.timestampRequests = t.timestampRequests, this.readyState = \"\", this.agent = t.agent || !1, this.socket = t.socket, this.enablesXDR = t.enablesXDR, this.pfx = t.pfx, this.key = t.key, this.passphrase = t.passphrase, this.cert = t.cert, this.ca = t.ca, this.ciphers = t.ciphers, this.rejectUnauthorized = t.rejectUnauthorized, this.forceNode = t.forceNode, this.isReactNative = t.isReactNative, this.extraHeaders = t.extraHeaders, this.localAddress = t.localAddress;\n        }\n\n        var o = n(21),\n            i = n(8);\n        t.exports = r, i(r.prototype), r.prototype.onError = function (t, e) {\n            var n = new Error(t);\n            return n.type = \"TransportError\", n.description = e, this.emit(\"error\", n), this;\n        }, r.prototype.open = function () {\n            return \"closed\" !== this.readyState && \"\" !== this.readyState || (this.readyState = \"opening\", this.doOpen()), this;\n        }, r.prototype.close = function () {\n            return \"opening\" !== this.readyState && \"open\" !== this.readyState || (this.doClose(), this.onClose()), this;\n        }, r.prototype.send = function (t) {\n            if (\"open\" !== this.readyState) throw new Error(\"Transport not open\");\n            this.write(t);\n        }, r.prototype.onOpen = function () {\n            this.readyState = \"open\", this.writable = !0, this.emit(\"open\");\n        }, r.prototype.onData = function (t) {\n            var e = o.decodePacket(t, this.socket.binaryType);\n            this.onPacket(e);\n        }, r.prototype.onPacket = function (t) {\n            this.emit(\"packet\", t);\n        }, r.prototype.onClose = function () {\n            this.readyState = \"closed\", this.emit(\"close\");\n        };\n    }, function (t, e, n) {\n        function r(t, n) {\n            var r = \"b\" + e.packets[t.type] + t.data.data;\n            return n(r);\n        }\n\n        function o(t, n, r) {\n            if (!n) return e.encodeBase64Packet(t, r);\n            var o = t.data,\n                i = new Uint8Array(o),\n                s = new Uint8Array(1 + o.byteLength);\n            s[0] = v[t.type];\n            for (var a = 0; a < i.length; a++) {\n                s[a + 1] = i[a];\n            }return r(s.buffer);\n        }\n\n        function i(t, n, r) {\n            if (!n) return e.encodeBase64Packet(t, r);\n            var o = new FileReader();\n            return o.onload = function () {\n                e.encodePacket({ type: t.type, data: o.result }, n, !0, r);\n            }, o.readAsArrayBuffer(t.data);\n        }\n\n        function s(t, n, r) {\n            if (!n) return e.encodeBase64Packet(t, r);\n            if (g) return i(t, n, r);\n            var o = new Uint8Array(1);\n            o[0] = v[t.type];\n            var s = new k([o.buffer, t.data]);\n            return r(s);\n        }\n\n        function a(t) {\n            try {\n                t = d.decode(t, { strict: !1 });\n            } catch (e) {\n                return !1;\n            }\n            return t;\n        }\n\n        function c(t, e, n) {\n            for (var r = new Array(t.length), o = l(t.length, n), i = function i(t, n, o) {\n                e(n, function (e, n) {\n                    r[t] = n, o(e, r);\n                });\n            }, s = 0; s < t.length; s++) {\n                i(s, t[s], o);\n            }\n        }\n\n        var p,\n            u = n(22),\n            h = n(23),\n            f = n(24),\n            l = n(25),\n            d = n(26);\n        \"undefined\" != typeof ArrayBuffer && (p = n(27));\n        var y = \"undefined\" != typeof navigator && /Android/i.test(navigator.userAgent),\n            m = \"undefined\" != typeof navigator && /PhantomJS/i.test(navigator.userAgent),\n            g = y || m;\n        e.protocol = 3;\n        var v = e.packets = { open: 0, close: 1, ping: 2, pong: 3, message: 4, upgrade: 5, noop: 6 },\n            b = u(v),\n            w = { type: \"error\", data: \"parser error\" },\n            k = n(28);\n        e.encodePacket = function (t, e, n, i) {\n            \"function\" == typeof e && (i = e, e = !1), \"function\" == typeof n && (i = n, n = null);\n            var a = void 0 === t.data ? void 0 : t.data.buffer || t.data;\n            if (\"undefined\" != typeof ArrayBuffer && a instanceof ArrayBuffer) return o(t, e, i);\n            if (\"undefined\" != typeof k && a instanceof k) return s(t, e, i);\n            if (a && a.base64) return r(t, i);\n            var c = v[t.type];\n            return void 0 !== t.data && (c += n ? d.encode(String(t.data), { strict: !1 }) : String(t.data)), i(\"\" + c);\n        }, e.encodeBase64Packet = function (t, n) {\n            var r = \"b\" + e.packets[t.type];\n            if (\"undefined\" != typeof k && t.data instanceof k) {\n                var o = new FileReader();\n                return o.onload = function () {\n                    var t = o.result.split(\",\")[1];\n                    n(r + t);\n                }, o.readAsDataURL(t.data);\n            }\n            var i;\n            try {\n                i = String.fromCharCode.apply(null, new Uint8Array(t.data));\n            } catch (s) {\n                for (var a = new Uint8Array(t.data), c = new Array(a.length), p = 0; p < a.length; p++) {\n                    c[p] = a[p];\n                }i = String.fromCharCode.apply(null, c);\n            }\n            return r += btoa(i), n(r);\n        }, e.decodePacket = function (t, n, r) {\n            if (void 0 === t) return w;\n            if (\"string\" == typeof t) {\n                if (\"b\" === t.charAt(0)) return e.decodeBase64Packet(t.substr(1), n);\n                if (r && (t = a(t), t === !1)) return w;\n                var o = t.charAt(0);\n                return Number(o) == o && b[o] ? t.length > 1 ? { type: b[o], data: t.substring(1) } : { type: b[o] } : w;\n            }\n            var i = new Uint8Array(t),\n                o = i[0],\n                s = f(t, 1);\n            return k && \"blob\" === n && (s = new k([s])), { type: b[o], data: s };\n        }, e.decodeBase64Packet = function (t, e) {\n            var n = b[t.charAt(0)];\n            if (!p) return { type: n, data: { base64: !0, data: t.substr(1) } };\n            var r = p.decode(t.substr(1));\n            return \"blob\" === e && k && (r = new k([r])), { type: n, data: r };\n        }, e.encodePayload = function (t, n, r) {\n            function o(t) {\n                return t.length + \":\" + t;\n            }\n\n            function i(t, r) {\n                e.encodePacket(t, !!s && n, !1, function (t) {\n                    r(null, o(t));\n                });\n            }\n\n            \"function\" == typeof n && (r = n, n = null);\n            var s = h(t);\n            return n && s ? k && !g ? e.encodePayloadAsBlob(t, r) : e.encodePayloadAsArrayBuffer(t, r) : t.length ? void c(t, i, function (t, e) {\n                return r(e.join(\"\"));\n            }) : r(\"0:\");\n        }, e.decodePayload = function (t, n, r) {\n            if (\"string\" != typeof t) return e.decodePayloadAsBinary(t, n, r);\n            \"function\" == typeof n && (r = n, n = null);\n            var o;\n            if (\"\" === t) return r(w, 0, 1);\n            for (var i, s, a = \"\", c = 0, p = t.length; c < p; c++) {\n                var u = t.charAt(c);\n                if (\":\" === u) {\n                    if (\"\" === a || a != (i = Number(a))) return r(w, 0, 1);\n                    if (s = t.substr(c + 1, i), a != s.length) return r(w, 0, 1);\n                    if (s.length) {\n                        if (o = e.decodePacket(s, n, !1), w.type === o.type && w.data === o.data) return r(w, 0, 1);\n                        var h = r(o, c + i, p);\n                        if (!1 === h) return;\n                    }\n                    c += i, a = \"\";\n                } else a += u;\n            }\n            return \"\" !== a ? r(w, 0, 1) : void 0;\n        }, e.encodePayloadAsArrayBuffer = function (t, n) {\n            function r(t, n) {\n                e.encodePacket(t, !0, !0, function (t) {\n                    return n(null, t);\n                });\n            }\n\n            return t.length ? void c(t, r, function (t, e) {\n                var r = e.reduce(function (t, e) {\n                    var n;\n                    return n = \"string\" == typeof e ? e.length : e.byteLength, t + n.toString().length + n + 2;\n                }, 0),\n                    o = new Uint8Array(r),\n                    i = 0;\n                return e.forEach(function (t) {\n                    var e = \"string\" == typeof t,\n                        n = t;\n                    if (e) {\n                        for (var r = new Uint8Array(t.length), s = 0; s < t.length; s++) {\n                            r[s] = t.charCodeAt(s);\n                        }n = r.buffer;\n                    }\n                    e ? o[i++] = 0 : o[i++] = 1;\n                    for (var a = n.byteLength.toString(), s = 0; s < a.length; s++) {\n                        o[i++] = parseInt(a[s]);\n                    }o[i++] = 255;\n                    for (var r = new Uint8Array(n), s = 0; s < r.length; s++) {\n                        o[i++] = r[s];\n                    }\n                }), n(o.buffer);\n            }) : n(new ArrayBuffer(0));\n        }, e.encodePayloadAsBlob = function (t, n) {\n            function r(t, n) {\n                e.encodePacket(t, !0, !0, function (t) {\n                    var e = new Uint8Array(1);\n                    if (e[0] = 1, \"string\" == typeof t) {\n                        for (var r = new Uint8Array(t.length), o = 0; o < t.length; o++) {\n                            r[o] = t.charCodeAt(o);\n                        }t = r.buffer, e[0] = 0;\n                    }\n                    for (var i = t instanceof ArrayBuffer ? t.byteLength : t.size, s = i.toString(), a = new Uint8Array(s.length + 1), o = 0; o < s.length; o++) {\n                        a[o] = parseInt(s[o]);\n                    }if (a[s.length] = 255, k) {\n                        var c = new k([e.buffer, a.buffer, t]);\n                        n(null, c);\n                    }\n                });\n            }\n\n            c(t, r, function (t, e) {\n                return n(new k(e));\n            });\n        }, e.decodePayloadAsBinary = function (t, n, r) {\n            \"function\" == typeof n && (r = n, n = null);\n            for (var o = t, i = []; o.byteLength > 0;) {\n                for (var s = new Uint8Array(o), a = 0 === s[0], c = \"\", p = 1; 255 !== s[p]; p++) {\n                    if (c.length > 310) return r(w, 0, 1);\n                    c += s[p];\n                }\n                o = f(o, 2 + c.length), c = parseInt(c);\n                var u = f(o, 0, c);\n                if (a) try {\n                    u = String.fromCharCode.apply(null, new Uint8Array(u));\n                } catch (h) {\n                    var l = new Uint8Array(u);\n                    u = \"\";\n                    for (var p = 0; p < l.length; p++) {\n                        u += String.fromCharCode(l[p]);\n                    }\n                }\n                i.push(u), o = f(o, c);\n            }\n            var d = i.length;\n            i.forEach(function (t, o) {\n                r(e.decodePacket(t, n, !0), o, d);\n            });\n        };\n    }, function (t, e) {\n        t.exports = Object.keys || function (t) {\n            var e = [],\n                n = Object.prototype.hasOwnProperty;\n            for (var r in t) {\n                n.call(t, r) && e.push(r);\n            }return e;\n        };\n    }, function (t, e, n) {\n        function r(t) {\n            if (!t || \"object\" != (typeof t === \"undefined\" ? \"undefined\" : _typeof(t))) return !1;\n            if (o(t)) {\n                for (var e = 0, n = t.length; e < n; e++) {\n                    if (r(t[e])) return !0;\n                }return !1;\n            }\n            if (\"function\" == typeof Buffer && Buffer.isBuffer && Buffer.isBuffer(t) || \"function\" == typeof ArrayBuffer && t instanceof ArrayBuffer || s && t instanceof Blob || a && t instanceof File) return !0;\n            if (t.toJSON && \"function\" == typeof t.toJSON && 1 === arguments.length) return r(t.toJSON(), !0);\n            for (var i in t) {\n                if (Object.prototype.hasOwnProperty.call(t, i) && r(t[i])) return !0;\n            }return !1;\n        }\n\n        var o = n(10),\n            i = Object.prototype.toString,\n            s = \"function\" == typeof Blob || \"undefined\" != typeof Blob && \"[object BlobConstructor]\" === i.call(Blob),\n            a = \"function\" == typeof File || \"undefined\" != typeof File && \"[object FileConstructor]\" === i.call(File);\n        t.exports = r;\n    }, function (t, e) {\n        t.exports = function (t, e, n) {\n            var r = t.byteLength;\n            if (e = e || 0, n = n || r, t.slice) return t.slice(e, n);\n            if (e < 0 && (e += r), n < 0 && (n += r), n > r && (n = r), e >= r || e >= n || 0 === r) return new ArrayBuffer(0);\n            for (var o = new Uint8Array(t), i = new Uint8Array(n - e), s = e, a = 0; s < n; s++, a++) {\n                i[a] = o[s];\n            }return i.buffer;\n        };\n    }, function (t, e) {\n        function n(t, e, n) {\n            function o(t, r) {\n                if (o.count <= 0) throw new Error(\"after called too many times\");\n                --o.count, t ? (i = !0, e(t), e = n) : 0 !== o.count || i || e(null, r);\n            }\n\n            var i = !1;\n            return n = n || r, o.count = t, 0 === t ? e() : o;\n        }\n\n        function r() {}\n\n        t.exports = n;\n    }, function (t, e) {\n        function n(t) {\n            for (var e, n, r = [], o = 0, i = t.length; o < i;) {\n                e = t.charCodeAt(o++), e >= 55296 && e <= 56319 && o < i ? (n = t.charCodeAt(o++), 56320 == (64512 & n) ? r.push(((1023 & e) << 10) + (1023 & n) + 65536) : (r.push(e), o--)) : r.push(e);\n            }return r;\n        }\n\n        function r(t) {\n            for (var e, n = t.length, r = -1, o = \"\"; ++r < n;) {\n                e = t[r], e > 65535 && (e -= 65536, o += d(e >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), o += d(e);\n            }return o;\n        }\n\n        function o(t, e) {\n            if (t >= 55296 && t <= 57343) {\n                if (e) throw Error(\"Lone surrogate U+\" + t.toString(16).toUpperCase() + \" is not a scalar value\");\n                return !1;\n            }\n            return !0;\n        }\n\n        function i(t, e) {\n            return d(t >> e & 63 | 128);\n        }\n\n        function s(t, e) {\n            if (0 == (4294967168 & t)) return d(t);\n            var n = \"\";\n            return 0 == (4294965248 & t) ? n = d(t >> 6 & 31 | 192) : 0 == (4294901760 & t) ? (o(t, e) || (t = 65533), n = d(t >> 12 & 15 | 224), n += i(t, 6)) : 0 == (4292870144 & t) && (n = d(t >> 18 & 7 | 240), n += i(t, 12), n += i(t, 6)), n += d(63 & t | 128);\n        }\n\n        function a(t, e) {\n            e = e || {};\n            for (var r, o = !1 !== e.strict, i = n(t), a = i.length, c = -1, p = \"\"; ++c < a;) {\n                r = i[c], p += s(r, o);\n            }return p;\n        }\n\n        function c() {\n            if (l >= f) throw Error(\"Invalid byte index\");\n            var t = 255 & h[l];\n            if (l++, 128 == (192 & t)) return 63 & t;\n            throw Error(\"Invalid continuation byte\");\n        }\n\n        function p(t) {\n            var e, n, r, i, s;\n            if (l > f) throw Error(\"Invalid byte index\");\n            if (l == f) return !1;\n            if (e = 255 & h[l], l++, 0 == (128 & e)) return e;\n            if (192 == (224 & e)) {\n                if (n = c(), s = (31 & e) << 6 | n, s >= 128) return s;\n                throw Error(\"Invalid continuation byte\");\n            }\n            if (224 == (240 & e)) {\n                if (n = c(), r = c(), s = (15 & e) << 12 | n << 6 | r, s >= 2048) return o(s, t) ? s : 65533;\n                throw Error(\"Invalid continuation byte\");\n            }\n            if (240 == (248 & e) && (n = c(), r = c(), i = c(), s = (7 & e) << 18 | n << 12 | r << 6 | i, s >= 65536 && s <= 1114111)) return s;\n            throw Error(\"Invalid UTF-8 detected\");\n        }\n\n        function u(t, e) {\n            e = e || {};\n            var o = !1 !== e.strict;\n            h = n(t), f = h.length, l = 0;\n            for (var i, s = []; (i = p(o)) !== !1;) {\n                s.push(i);\n            }return r(s);\n        } /*! https://mths.be/utf8js v2.1.2 by @mathias */\n        var h,\n            f,\n            l,\n            d = String.fromCharCode;\n        t.exports = { version: \"2.1.2\", encode: a, decode: u };\n    }, function (t, e) {\n        !function () {\n            \"use strict\";\n\n            for (var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", n = new Uint8Array(256), r = 0; r < t.length; r++) {\n                n[t.charCodeAt(r)] = r;\n            }e.encode = function (e) {\n                var n,\n                    r = new Uint8Array(e),\n                    o = r.length,\n                    i = \"\";\n                for (n = 0; n < o; n += 3) {\n                    i += t[r[n] >> 2], i += t[(3 & r[n]) << 4 | r[n + 1] >> 4], i += t[(15 & r[n + 1]) << 2 | r[n + 2] >> 6], i += t[63 & r[n + 2]];\n                }return o % 3 === 2 ? i = i.substring(0, i.length - 1) + \"=\" : o % 3 === 1 && (i = i.substring(0, i.length - 2) + \"==\"), i;\n            }, e.decode = function (t) {\n                var e,\n                    r,\n                    o,\n                    i,\n                    s,\n                    a = .75 * t.length,\n                    c = t.length,\n                    p = 0;\n                \"=\" === t[t.length - 1] && (a--, \"=\" === t[t.length - 2] && a--);\n                var u = new ArrayBuffer(a),\n                    h = new Uint8Array(u);\n                for (e = 0; e < c; e += 4) {\n                    r = n[t.charCodeAt(e)], o = n[t.charCodeAt(e + 1)], i = n[t.charCodeAt(e + 2)], s = n[t.charCodeAt(e + 3)], h[p++] = r << 2 | o >> 4, h[p++] = (15 & o) << 4 | i >> 2, h[p++] = (3 & i) << 6 | 63 & s;\n                }return u;\n            };\n        }();\n    }, function (t, e) {\n        function n(t) {\n            return t.map(function (t) {\n                if (t.buffer instanceof ArrayBuffer) {\n                    var e = t.buffer;\n                    if (t.byteLength !== e.byteLength) {\n                        var n = new Uint8Array(t.byteLength);\n                        n.set(new Uint8Array(e, t.byteOffset, t.byteLength)), e = n.buffer;\n                    }\n                    return e;\n                }\n                return t;\n            });\n        }\n\n        function r(t, e) {\n            e = e || {};\n            var r = new i();\n            return n(t).forEach(function (t) {\n                r.append(t);\n            }), e.type ? r.getBlob(e.type) : r.getBlob();\n        }\n\n        function o(t, e) {\n            return new Blob(n(t), e || {});\n        }\n\n        var i = \"undefined\" != typeof i ? i : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : \"undefined\" != typeof MSBlobBuilder ? MSBlobBuilder : \"undefined\" != typeof MozBlobBuilder && MozBlobBuilder,\n            s = function () {\n            try {\n                var t = new Blob([\"hi\"]);\n                return 2 === t.size;\n            } catch (e) {\n                return !1;\n            }\n        }(),\n            a = s && function () {\n            try {\n                var t = new Blob([new Uint8Array([1, 2])]);\n                return 2 === t.size;\n            } catch (e) {\n                return !1;\n            }\n        }(),\n            c = i && i.prototype.append && i.prototype.getBlob;\n        \"undefined\" != typeof Blob && (r.prototype = Blob.prototype, o.prototype = Blob.prototype), t.exports = function () {\n            return s ? a ? Blob : o : c ? r : void 0;\n        }();\n    }, function (t, e) {\n        e.encode = function (t) {\n            var e = \"\";\n            for (var n in t) {\n                t.hasOwnProperty(n) && (e.length && (e += \"&\"), e += encodeURIComponent(n) + \"=\" + encodeURIComponent(t[n]));\n            }return e;\n        }, e.decode = function (t) {\n            for (var e = {}, n = t.split(\"&\"), r = 0, o = n.length; r < o; r++) {\n                var i = n[r].split(\"=\");\n                e[decodeURIComponent(i[0])] = decodeURIComponent(i[1]);\n            }\n            return e;\n        };\n    }, function (t, e) {\n        t.exports = function (t, e) {\n            var n = function n() {};\n            n.prototype = e.prototype, t.prototype = new n(), t.prototype.constructor = t;\n        };\n    }, function (t, e) {\n        \"use strict\";\n\n        function n(t) {\n            var e = \"\";\n            do {\n                e = s[t % a] + e, t = Math.floor(t / a);\n            } while (t > 0);\n            return e;\n        }\n\n        function r(t) {\n            var e = 0;\n            for (u = 0; u < t.length; u++) {\n                e = e * a + c[t.charAt(u)];\n            }return e;\n        }\n\n        function o() {\n            var t = n(+new Date());\n            return t !== i ? (p = 0, i = t) : t + \".\" + n(p++);\n        }\n\n        for (var i, s = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\".split(\"\"), a = 64, c = {}, p = 0, u = 0; u < a; u++) {\n            c[s[u]] = u;\n        }o.encode = n, o.decode = r, t.exports = o;\n    }, function (t, e, n) {\n        (function (e) {\n            function r() {}\n\n            function o() {\n                return \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : \"undefined\" != typeof e ? e : {};\n            }\n\n            function i(t) {\n                if (s.call(this, t), this.query = this.query || {}, !c) {\n                    var e = o();\n                    c = e.___eio = e.___eio || [];\n                }\n                this.index = c.length;\n                var n = this;\n                c.push(function (t) {\n                    n.onData(t);\n                }), this.query.j = this.index, \"function\" == typeof addEventListener && addEventListener(\"beforeunload\", function () {\n                    n.script && (n.script.onerror = r);\n                }, !1);\n            }\n\n            var s = n(19),\n                a = n(30);\n            t.exports = i;\n            var c,\n                p = /\\n/g,\n                u = /\\\\n/g;\n            a(i, s), i.prototype.supportsBinary = !1, i.prototype.doClose = function () {\n                this.script && (this.script.parentNode.removeChild(this.script), this.script = null), this.form && (this.form.parentNode.removeChild(this.form), this.form = null, this.iframe = null), s.prototype.doClose.call(this);\n            }, i.prototype.doPoll = function () {\n                var t = this,\n                    e = document.createElement(\"script\");\n                this.script && (this.script.parentNode.removeChild(this.script), this.script = null), e.async = !0, e.src = this.uri(), e.onerror = function (e) {\n                    t.onError(\"jsonp poll error\", e);\n                };\n                var n = document.getElementsByTagName(\"script\")[0];\n                n ? n.parentNode.insertBefore(e, n) : (document.head || document.body).appendChild(e), this.script = e;\n                var r = \"undefined\" != typeof navigator && /gecko/i.test(navigator.userAgent);\n                r && setTimeout(function () {\n                    var t = document.createElement(\"iframe\");\n                    document.body.appendChild(t), document.body.removeChild(t);\n                }, 100);\n            }, i.prototype.doWrite = function (t, e) {\n                function n() {\n                    r(), e();\n                }\n\n                function r() {\n                    if (o.iframe) try {\n                        o.form.removeChild(o.iframe);\n                    } catch (t) {\n                        o.onError(\"jsonp polling iframe removal error\", t);\n                    }\n                    try {\n                        var e = '<iframe src=\"javascript:0\" name=\"' + o.iframeId + '\">';\n                        i = document.createElement(e);\n                    } catch (t) {\n                        i = document.createElement(\"iframe\"), i.name = o.iframeId, i.src = \"javascript:0\";\n                    }\n                    i.id = o.iframeId, o.form.appendChild(i), o.iframe = i;\n                }\n\n                var o = this;\n                if (!this.form) {\n                    var i,\n                        s = document.createElement(\"form\"),\n                        a = document.createElement(\"textarea\"),\n                        c = this.iframeId = \"eio_iframe_\" + this.index;\n                    s.className = \"socketio\", s.style.position = \"absolute\", s.style.top = \"-1000px\", s.style.left = \"-1000px\", s.target = c, s.method = \"POST\", s.setAttribute(\"accept-charset\", \"utf-8\"), a.name = \"d\", s.appendChild(a), document.body.appendChild(s), this.form = s, this.area = a;\n                }\n                this.form.action = this.uri(), r(), t = t.replace(u, \"\\\\\\n\"), this.area.value = t.replace(p, \"\\\\n\");\n                try {\n                    this.form.submit();\n                } catch (h) {}\n                this.iframe.attachEvent ? this.iframe.onreadystatechange = function () {\n                    \"complete\" === o.iframe.readyState && n();\n                } : this.iframe.onload = n;\n            };\n        }).call(e, function () {\n            return this;\n        }());\n    }, function (t, e, n) {\n        function r(t) {\n            var e = t && t.forceBase64;\n            e && (this.supportsBinary = !1), this.perMessageDeflate = t.perMessageDeflate, this.usingBrowserWebSocket = o && !t.forceNode, this.protocols = t.protocols, this.usingBrowserWebSocket || (l = i), s.call(this, t);\n        }\n\n        var o,\n            i,\n            s = n(20),\n            a = n(21),\n            c = n(29),\n            p = n(30),\n            u = n(31),\n            h = n(3)(\"engine.io-client:websocket\");\n        if (\"undefined\" == typeof self) try {\n            i = n(34);\n        } catch (f) {} else o = self.WebSocket || self.MozWebSocket;\n        var l = o || i;\n        t.exports = r, p(r, s), r.prototype.name = \"websocket\", r.prototype.supportsBinary = !0, r.prototype.doOpen = function () {\n            if (this.check()) {\n                var t = this.uri(),\n                    e = this.protocols,\n                    n = { agent: this.agent, perMessageDeflate: this.perMessageDeflate };\n                n.pfx = this.pfx, n.key = this.key, n.passphrase = this.passphrase, n.cert = this.cert, n.ca = this.ca, n.ciphers = this.ciphers, n.rejectUnauthorized = this.rejectUnauthorized, this.extraHeaders && (n.headers = this.extraHeaders), this.localAddress && (n.localAddress = this.localAddress);\n                try {\n                    this.ws = this.usingBrowserWebSocket && !this.isReactNative ? e ? new l(t, e) : new l(t) : new l(t, e, n);\n                } catch (r) {\n                    return this.emit(\"error\", r);\n                }\n                void 0 === this.ws.binaryType && (this.supportsBinary = !1), this.ws.supports && this.ws.supports.binary ? (this.supportsBinary = !0, this.ws.binaryType = \"nodebuffer\") : this.ws.binaryType = \"arraybuffer\", this.addEventListeners();\n            }\n        }, r.prototype.addEventListeners = function () {\n            var t = this;\n            this.ws.onopen = function () {\n                t.onOpen();\n            }, this.ws.onclose = function () {\n                t.onClose();\n            }, this.ws.onmessage = function (e) {\n                t.onData(e.data);\n            }, this.ws.onerror = function (e) {\n                t.onError(\"websocket error\", e);\n            };\n        }, r.prototype.write = function (t) {\n            function e() {\n                n.emit(\"flush\"), setTimeout(function () {\n                    n.writable = !0, n.emit(\"drain\");\n                }, 0);\n            }\n\n            var n = this;\n            this.writable = !1;\n            for (var r = t.length, o = 0, i = r; o < i; o++) {\n                !function (t) {\n                    a.encodePacket(t, n.supportsBinary, function (o) {\n                        if (!n.usingBrowserWebSocket) {\n                            var i = {};\n                            if (t.options && (i.compress = t.options.compress), n.perMessageDeflate) {\n                                var s = \"string\" == typeof o ? Buffer.byteLength(o) : o.length;\n                                s < n.perMessageDeflate.threshold && (i.compress = !1);\n                            }\n                        }\n                        try {\n                            n.usingBrowserWebSocket ? n.ws.send(o) : n.ws.send(o, i);\n                        } catch (a) {\n                            h(\"websocket closed before onclose event\");\n                        }\n                        --r || e();\n                    });\n                }(t[o]);\n            }\n        }, r.prototype.onClose = function () {\n            s.prototype.onClose.call(this);\n        }, r.prototype.doClose = function () {\n            \"undefined\" != typeof this.ws && this.ws.close();\n        }, r.prototype.uri = function () {\n            var t = this.query || {},\n                e = this.secure ? \"wss\" : \"ws\",\n                n = \"\";\n            this.port && (\"wss\" === e && 443 !== Number(this.port) || \"ws\" === e && 80 !== Number(this.port)) && (n = \":\" + this.port), this.timestampRequests && (t[this.timestampParam] = u()), this.supportsBinary || (t.b64 = 1), t = c.encode(t), t.length && (t = \"?\" + t);\n            var r = this.hostname.indexOf(\":\") !== -1;\n            return e + \"://\" + (r ? \"[\" + this.hostname + \"]\" : this.hostname) + n + this.path + t;\n        }, r.prototype.check = function () {\n            return !(!l || \"__initialize\" in l && this.name === r.prototype.name);\n        };\n    }, function (t, e) {}, function (t, e) {\n        var n = [].indexOf;\n        t.exports = function (t, e) {\n            if (n) return t.indexOf(e);\n            for (var r = 0; r < t.length; ++r) {\n                if (t[r] === e) return r;\n            }return -1;\n        };\n    }, function (t, e, n) {\n        \"use strict\";\n\n        function r(t, e, n) {\n            this.io = t, this.nsp = e, this.json = this, this.ids = 0, this.acks = {}, this.receiveBuffer = [], this.sendBuffer = [], this.connected = !1, this.disconnected = !0, this.flags = {}, n && n.query && (this.query = n.query), this.io.autoConnect && this.open();\n        }\n\n        var o = \"function\" == typeof Symbol && \"symbol\" == _typeof(Symbol.iterator) ? function (t) {\n            return typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n        } : function (t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t === \"undefined\" ? \"undefined\" : _typeof(t);\n        },\n            i = n(7),\n            s = n(8),\n            a = n(37),\n            c = n(38),\n            p = n(39),\n            u = n(3)(\"socket.io-client:socket\"),\n            h = n(29),\n            f = n(23);\n        t.exports = e = r;\n        var l = {\n            connect: 1,\n            connect_error: 1,\n            connect_timeout: 1,\n            connecting: 1,\n            disconnect: 1,\n            error: 1,\n            reconnect: 1,\n            reconnect_attempt: 1,\n            reconnect_failed: 1,\n            reconnect_error: 1,\n            reconnecting: 1,\n            ping: 1,\n            pong: 1\n        },\n            d = s.prototype.emit;\n        s(r.prototype), r.prototype.subEvents = function () {\n            if (!this.subs) {\n                var t = this.io;\n                this.subs = [c(t, \"open\", p(this, \"onopen\")), c(t, \"packet\", p(this, \"onpacket\")), c(t, \"close\", p(this, \"onclose\"))];\n            }\n        }, r.prototype.open = r.prototype.connect = function () {\n            return this.connected ? this : (this.subEvents(), this.io.open(), \"open\" === this.io.readyState && this.onopen(), this.emit(\"connecting\"), this);\n        }, r.prototype.send = function () {\n            var t = a(arguments);\n            return t.unshift(\"message\"), this.emit.apply(this, t), this;\n        }, r.prototype.emit = function (t) {\n            if (l.hasOwnProperty(t)) return d.apply(this, arguments), this;\n            var e = a(arguments),\n                n = {\n                type: (void 0 !== this.flags.binary ? this.flags.binary : f(e)) ? i.BINARY_EVENT : i.EVENT,\n                data: e\n            };\n            return n.options = {}, n.options.compress = !this.flags || !1 !== this.flags.compress, \"function\" == typeof e[e.length - 1] && (u(\"emitting packet with ack id %d\", this.ids), this.acks[this.ids] = e.pop(), n.id = this.ids++), this.connected ? this.packet(n) : this.sendBuffer.push(n), this.flags = {}, this;\n        }, r.prototype.packet = function (t) {\n            t.nsp = this.nsp, this.io.packet(t);\n        }, r.prototype.onopen = function () {\n            if (u(\"transport is open - connecting\"), \"/\" !== this.nsp) if (this.query) {\n                var t = \"object\" === o(this.query) ? h.encode(this.query) : this.query;\n                u(\"sending connect packet with query %s\", t), this.packet({ type: i.CONNECT, query: t });\n            } else this.packet({ type: i.CONNECT });\n        }, r.prototype.onclose = function (t) {\n            u(\"close (%s)\", t), this.connected = !1, this.disconnected = !0, delete this.id, this.emit(\"disconnect\", t);\n        }, r.prototype.onpacket = function (t) {\n            var e = t.nsp === this.nsp,\n                n = t.type === i.ERROR && \"/\" === t.nsp;\n            if (e || n) switch (t.type) {\n                case i.CONNECT:\n                    this.onconnect();\n                    break;\n                case i.EVENT:\n                    this.onevent(t);\n                    break;\n                case i.BINARY_EVENT:\n                    this.onevent(t);\n                    break;\n                case i.ACK:\n                    this.onack(t);\n                    break;\n                case i.BINARY_ACK:\n                    this.onack(t);\n                    break;\n                case i.DISCONNECT:\n                    this.ondisconnect();\n                    break;\n                case i.ERROR:\n                    this.emit(\"error\", t.data);\n            }\n        }, r.prototype.onevent = function (t) {\n            var e = t.data || [];\n            u(\"emitting event %j\", e), null != t.id && (u(\"attaching ack callback to event\"), e.push(this.ack(t.id))), this.connected ? d.apply(this, e) : this.receiveBuffer.push(e);\n        }, r.prototype.ack = function (t) {\n            var e = this,\n                n = !1;\n            return function () {\n                if (!n) {\n                    n = !0;\n                    var r = a(arguments);\n                    u(\"sending ack %j\", r), e.packet({ type: f(r) ? i.BINARY_ACK : i.ACK, id: t, data: r });\n                }\n            };\n        }, r.prototype.onack = function (t) {\n            var e = this.acks[t.id];\n            \"function\" == typeof e ? (u(\"calling ack %s with %j\", t.id, t.data), e.apply(this, t.data), delete this.acks[t.id]) : u(\"bad ack %s\", t.id);\n        }, r.prototype.onconnect = function () {\n            this.connected = !0, this.disconnected = !1, this.emit(\"connect\"), this.emitBuffered();\n        }, r.prototype.emitBuffered = function () {\n            var t;\n            for (t = 0; t < this.receiveBuffer.length; t++) {\n                d.apply(this, this.receiveBuffer[t]);\n            }for (this.receiveBuffer = [], t = 0; t < this.sendBuffer.length; t++) {\n                this.packet(this.sendBuffer[t]);\n            }this.sendBuffer = [];\n        }, r.prototype.ondisconnect = function () {\n            u(\"server disconnect (%s)\", this.nsp), this.destroy(), this.onclose(\"io server disconnect\");\n        }, r.prototype.destroy = function () {\n            if (this.subs) {\n                for (var t = 0; t < this.subs.length; t++) {\n                    this.subs[t].destroy();\n                }this.subs = null;\n            }\n            this.io.destroy(this);\n        }, r.prototype.close = r.prototype.disconnect = function () {\n            return this.connected && (u(\"performing disconnect (%s)\", this.nsp), this.packet({ type: i.DISCONNECT })), this.destroy(), this.connected && this.onclose(\"io client disconnect\"), this;\n        }, r.prototype.compress = function (t) {\n            return this.flags.compress = t, this;\n        }, r.prototype.binary = function (t) {\n            return this.flags.binary = t, this;\n        };\n    }, function (t, e) {\n        function n(t, e) {\n            var n = [];\n            e = e || 0;\n            for (var r = e || 0; r < t.length; r++) {\n                n[r - e] = t[r];\n            }return n;\n        }\n\n        t.exports = n;\n    }, function (t, e) {\n        \"use strict\";\n\n        function n(t, e, n) {\n            return t.on(e, n), {\n                destroy: function destroy() {\n                    t.removeListener(e, n);\n                }\n            };\n        }\n\n        t.exports = n;\n    }, function (t, e) {\n        var n = [].slice;\n        t.exports = function (t, e) {\n            if (\"string\" == typeof e && (e = t[e]), \"function\" != typeof e) throw new Error(\"bind() requires a function\");\n            var r = n.call(arguments, 2);\n            return function () {\n                return e.apply(t, r.concat(n.call(arguments)));\n            };\n        };\n    }, function (t, e) {\n        function n(t) {\n            t = t || {}, this.ms = t.min || 100, this.max = t.max || 1e4, this.factor = t.factor || 2, this.jitter = t.jitter > 0 && t.jitter <= 1 ? t.jitter : 0, this.attempts = 0;\n        }\n\n        t.exports = n, n.prototype.duration = function () {\n            var t = this.ms * Math.pow(this.factor, this.attempts++);\n            if (this.jitter) {\n                var e = Math.random(),\n                    n = Math.floor(e * this.jitter * t);\n                t = 0 == (1 & Math.floor(10 * e)) ? t - n : t + n;\n            }\n            return 0 | Math.min(t, this.max);\n        }, n.prototype.reset = function () {\n            this.attempts = 0;\n        }, n.prototype.setMin = function (t) {\n            this.ms = t;\n        }, n.prototype.setMax = function (t) {\n            this.max = t;\n        }, n.prototype.setJitter = function (t) {\n            this.jitter = t;\n        };\n    }]);\n});\n\n}).call(this,require(\"buffer\").Buffer)\n},{\"buffer\":33}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n//import $ from './jquery-2.0.3.min'\nvar frag = document.createDocumentFragment();\n\nvar arrow = document.createElement('div'),\n    button = document.createElement('button'),\n    message = document.createElement('div'),\n    moveMessage = document.createElement('div'),\n    endMessage = document.createElement(\"div\");\n\nbutton.id = 'play-button';\nmessage.id = 'game-message';\narrow.innerHTML = \"&larr;\";\narrow.id = 'pass-arrow';\nendMessage.id = \"end-message\";\nmoveMessage.className = 'msgMove';\nfrag.appendChild(arrow);\nfrag.appendChild(button);\nfrag.appendChild(message);\nfrag.appendChild(endMessage);\nfrag.appendChild(moveMessage);\n\nfunction moveMess() {\n    var jdim = $(\".msgMove\");\n    jdim.removeClass('anim');\n    void moveMessage.offsetWidth;\n    jdim.addClass('anim');\n}\n\nexports.default = {\n    fragmentToDom: function fragmentToDom(dom) {\n        dom.appendChild(frag);\n        frag = null;\n    },\n    clearEvents: function clearEvents() {\n        $(button).off(\"click\");\n        $(arrow).off(\"click\");\n    },\n    showArrow: function showArrow() {\n        arrow.classList.add('show');\n    },\n    hideArrow: function hideArrow() {\n        arrow.classList.remove('show');\n    },\n    showButton: function showButton(text) {\n        button.innerHTML = text;\n        button.classList.add('show');\n    },\n    hideButton: function hideButton(text) {\n        button.classList.remove('show');\n    },\n    arrowClickOnce: function arrowClickOnce(cb) {\n        $(arrow).on(\"click\", function () {\n            cb();\n            $(this).off(\"click\");\n        });\n    },\n    buttonClickOnce: function buttonClickOnce(cb) {\n        $(button).on(\"click\", function () {\n            cb();\n            $(this).off(\"click\");\n        });\n    },\n    showWin: function showWin(won) {\n        endMessage.innerHTML = won ? \"YOU WON!\" : \"YOU LOST!\";\n        endMessage.classList.add(\"show\");\n    },\n    hideWin: function hideWin() {\n        endMessage.classList.remove(\"show\");\n    },\n    showMessage: function showMessage(msg) {\n        message.innerHTML = msg;\n        message.style.display = 'block';\n    },\n    showMoveMess: function showMoveMess(msg) {\n        moveMessage.innerHTML = msg;\n        moveMess();\n    },\n    showPassingScreen: function showPassingScreen(dir) {\n        var directions = ['left', 'right', 'opposite'];\n        this.showMessage(\"Pass three cards to the \" + directions[dir]);\n        [function () {\n            $(arrow).css(\"transform\", 'rotate(0)');\n        }, function () {\n            $(arrow).css(\"transform\", 'rotate(180deg)');\n        }, function () {\n            $(arrow).css(\"transform\", 'rotate(90deg)');\n        }][dir]();\n    },\n    hideMessage: function hideMessage() {\n        message.style.display = '';\n    }\n};\n\n},{}],32:[function(require,module,exports){\n'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n},{}],33:[function(require,module,exports){\n(function (Buffer){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species != null &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayLike(value)\n  }\n\n  if (value == null) {\n    throw TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n          : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n}).call(this,require(\"buffer\").Buffer)\n},{\"base64-js\":32,\"buffer\":33,\"ieee754\":34}],34:[function(require,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}]},{},[24]);\n"],"file":"index.min.js"}